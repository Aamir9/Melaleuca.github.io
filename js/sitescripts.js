function getIdForAnalytics(){return PageClientData.Id===undefined||PageClientData.Id===null||PageClientData.Id===""?"Guest":PageClientData.Id}function createOnClickAnalytics(n,t,i){try{i===null&&(i=standardElementAnalyticsAttributes);typeof cmCreateElementTag=="function"&&cmCreateElementTag(n,t,i)}catch(r){}}function TrapEnterKey(event,exeFunction){var keyCode=event.keyCode?event.keyCode:event.which?event.which:event.charCode;if(keyCode==13)return exeFunction?(typeof exeFunction=="function"?(exeFunction(),event.preventDefault()):eval(exeFunction),!1):!1}function HideImageOnError(n){n.style.display="none"}function DisplayContentModal(n){Melaleuca.Web.AjaxManager.DisplayContent(n,"Popup","GeneralMessageDisplayPopUp",!1,ReturnDisplayContentModal)}function ReturnDisplayContentModal(n){getGeneralPopUp(n)}function PerformSearch(n,t){window.location=t&&t.length>0?"/Search/?searchterm="+encodeURIComponent(n.replace(/\\/g,""))+"&siteSection="+t:"/Search/?searchterm="+encodeURIComponent(n.replace(/\\/g,""))}function ChangeCurrentBreadcrumb(n,t){var i=document.getElementById("bcCurrentLocation");i&&(i.innerHTML=n);t&&($(".crumbText .middle-crumb").css("display","none"),$(".crumbText .crumbSeperator").css("display","none"),$(".crumbText .crumbSeperator.last-seperator").css("display","inline"))}function lateLoadExternalScripts(n){try{for(var t=0;t<n.length;t++)lateLoadExternalScript(n[t])}catch(i){logException("Error in lateLoadExternalScripts: "+i);throw i;}}function lateLoadExternalScript(scriptReference){try{typeof scriptReference=="string"&&eval("$.getScript('"+scriptReference+"');")}catch(err){logException("Error in lateLoadExternalScript: "+err);throw err;}}function InsertContentPage(pageName,containerID,callback){var container=document.getElementById(containerID),callbackFunction;container?container.innerHTML.replace(/^\s\s*/,"").replace(/\s\s*$/,"").length==0?(callbackFunction=function(rtnObj){if(rtnObj){if(rtnObj=eval("("+rtnObj+")"),rtnObj.Success){var container=document.getElementById(containerID);container&&(container.innerHTML=rtnObj.Content)}callback&&eval(callback(rtnObj))}else callback&&eval(callback())},typeof Melaleuca=="undefined"?$(function(){Melaleuca.Web.AjaxManager.GetContentPage(pageName,callbackFunction)}):Melaleuca.Web.AjaxManager.GetContentPage(pageName,callbackFunction)):eval(callback({Success:!0,Content:container.innerHTML})):callback&&eval(callback())}function DisplayExtendedPromotion(n,t){showModalPopup(n);Melaleuca.Web.AjaxManager.DisplayExtendedPromotion(t,DisplayExtendedPromotionReturn)}function DisplayExtendedPromotionReturn(n){document.getElementById(n.ContainerID).innerHTML=n.Html}function DisplayPromotionModal(n){DisplayPromotion(n,"PopupFullWidth","FullPagePromotionPopUp","ProductStoreFlash",!1)}function DisplayPromotion(n,t,i,r,u){Melaleuca.Web.AjaxManager.DisplayPromotionContentByID(n,t,i,r,u,ReturnDisplayPromotionModal)}function DisplayPromotionForAutoAcceptance(n,t,i,r,u){$.ajax({url:"/Promotion/DisplayAutoAcceptancePromotionContentById",type:"GET",cache:!1,contentType:"application/json; charset=utf-8",dataType:"json",data:{promoID:n,location:t,displayContainerName:i,promoLocation:r,updatePromotionViewed:u},success:function(n){ReturnDisplayPromotionModal(n.returnJavasript)}})}function ReturnDisplayPromotionModal(returnVal){eval(returnVal)}function getFullPagePromotionPopUp(n){$get("FullPagePromotionPopUpContent").innerHTML=n;showModalPopup("FullPagePromotionPopUp")}function getGeneralMessageNoCloseContent(n){$get("GeneralMessageNoCloseContent").innerHTML=n;showModalPopup("popGeneralMessageCenterNoClose")}function selectCountryCulture(n){Melaleuca.Web.AjaxManager.SelectCountryCulture(n,returnSelectCountryCulture)}function returnSelectCountryCulture(n){window.location=n}function RadioButtonInRepeater_Click(n,t,r){for(re=new RegExp(n+".*"+t),i=0;i<document.forms[0].elements.length;i++)elm=document.forms[0].elements[i],elm.type=="radio"&&re.test(elm.name)&&(elm.checked=!1);r.checked=!0}function PageManager(n){this.PageCountLinkArr=n}function pageLoad(){javascriptReady=!0;launchModalOnPageLoad&&showModalPopup(ModalPopupID);showVideoOnPageLoad&&ViewVideo(pageLoadVideoPath);$(".utility-container").on("click",".btnRemove",function(){$(this).closest("tr").fadeOut("slow",function(){MyCartListWithCartCount()})});$(".showMiniCart").click(function(n){return n.preventDefault(),$(".utility-container.favorites").css({visibility:"hidden"}),$(".utility-container.minicart").toggle(),MyCartListWithCartCount(),updateCartData&&updateCartData(),!1});$(".showFavorites").click(function(){return $("#FieldAll").attr("checked",!1),$(".utility-container.minicart").hide(),$(".utility-container.favorites").css("visibility")=="hidden"?$(".utility-container.favorites").css("visibility","visible"):$(".utility-container.favorites").css("visibility","hidden"),MyFavoriteList(),MyCartListWithCartCount(),!1});$("a.minicart-close").click(function(){return $(".utility-container.minicart").hide(),!1});$("a.favorites-close").click(function(){return $(".utility-container.favorites").css({visibility:"hidden"}),!1});$(".AddToCart, .kitSelectionList").on("click",".btn",function(){MyCartListWithCartCount()});$(".addItemToCart").click(function(){return btnAddToCart_OnClick(this),MyCartListWithCartCount(),!1});$(".cartInputBox").keyup(function(n){return n.keyCode==13?(MyCartListWithCartCount(),!1):!1});$(".utility-container").on("click","label",function(){$(this).closest(".item.group").toggleClass("selected",this.checked)});MyFavoritesListSelcetAll();standardElementAnalyticsAttributes=PageClientData.CustomerCulture+"-_--_--_--_-"+getIdForAnalytics()}function MyFavoritesListSelcetAll(){$("#FieldAll").click(function(){$(".utility-container.favorites INPUT[type='checkbox']").attr("checked",$("#FieldAll").is(":checked"));var n=$("#myFavoritesListv2 > div:not(.selected)").children().find(".choice").parents(".item"),t=$("#myFavoritesListv2").children().find(".choice").parents(".item");n.length>0?n.toggleClass("selected"):t.toggleClass("selected")})}function showModalPopup(n){stopAddAnimation();$find(n).show();window.scrollTo(0,0)}function closeModalPopup(n){var t=$find(n);t&&t.hide()}function GoToPage(n,t){var r=n,i="/";r.indexOf("/")==0&&r.length>1&&(r=n.substr(1).toLowerCase());r=r.toLowerCase();switch(r){case"checkout":i="/ProductStore/Checkout";break;case"cart":i="/ProductStore/Cart";break;case"signin":i=typeof isPwaOnIos=="function"&&isPwaOnIos()?"/Account/SignIn?isPwaOnIos=true":"/Account/SignIn";break;case"logout":case"signout":i=typeof isPwaOnIos=="function"&&isPwaOnIos()?"/Account/SignOut?isPwaOnIos=true":"/Account/SignOut";break;case"mypreferences":i="/MyAccount/MyPreferences";break;case"productstore":i="/ProductStore/Home/ProductStoreLanding";break;case"helpcenter":i="/HelpCenter/HelpCenter.aspx";break;case"introduction":i="/Introduction/Default.aspx";break;case"myfavorites":i="/ProductStore/Favorites";break;case"creditcard":i="/MarketPlace/Content.aspx?Page=Credit_Card";break;case"addmelaleucamastercard":i="/MyAccount/EditPaymethod/?AddMelaleucaMasterCard=true";break;case"createwebaccount":i="/Account/Create";break;case"checkoutpromo":i="/ProductStore/CheckoutPromo";break;case"myaccount":i="/Account/";break;default:i=n}t===undefined?window.location=i:window.open(i,t)}function RedirectFromDropDown(n){$get(n).options[$get(n).selectedIndex].value!="none"&&(location=$get(n).options[$get(n).selectedIndex].value)}function executeLinkButton(btnID){var btn=$get(btnID);if(btn)try{eval(btn.getAttribute("href"))}catch(err){window.location=btn.getAttribute("href")}}function setDisabledClass(n){var t=$get(n);t!=null&&(t.className="disabled")}function getGeneralPopUp(n){$get("GeneralMessageContent").innerHTML=n;showModalPopup("GeneralMessageDisplayPopUp")}function getGeneralCenterNoClosePopUp(n){$get("GeneralMessageNoCloseContent").innerHTML=n;showModalPopup("popGeneralMessageCenterNoClose")}function gotoProductPage(n,t){if(typeof cmCreateElementTag=="function")try{cmCreateElementTag("Recommendation Click",t,standardElementAnalyticsAttributes)}catch(i){}window.location="/ProductStore/Product?sku="+n}function GoToCheckoutPage(){GoToPage("checkout",undefined)}function GetValueFromControl(n){var t=$get(n);return t!=null?t.value:null}function getSelectedValueFromDropDown(n){var i=null,t=$get(n);return t!=null&&(i=t.options[t.selectedIndex].value),i}function isBtnEnabled(n){return n!=null&&n.className.search(/disabled/)==-1?!0:!1}function updateHeaderCartCount(n){var t=$get("headerCartCount"),i=$get("miniCartCount");t&&(t.innerHTML=n);i&&(i.innerHTML=n)}function addToCartRefresh(){try{addToCartRefreshId!=null&&(window.location=window.location.href)}catch(n){}}function rtnAddToCart(rtn){try{rtn.Analytics!=null&&eval(rtn.Analytics);rtn.Javascript!=null?eval(rtn.Javascript):rtn.HtmlMessage!=null&&alert(rtn.HtmlMessage);rtn.Promotion!=null&&eval(rtn.Promotion);typeof ProductStore!="undefined"&&ProductStore.renderAddToCartPlaceholders&&ProductStore.renderAddToCartPlaceholders();typeof Popup!="undefined"&&Popup.closePopup()}catch(err){}}function browserWidth(){return window.innerWidth!=null?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:document.body!=null?document.body.clientWidth:null}function browserHeight(){return window.innerHeight!=null?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body!=null?document.body.clientHeight:null}function AnimateAddToDest(n,t){try{elemBtn=n;elemBox=$get("animatedCartBox");elemDest=$get(t);startPos=WebForm_GetElementPosition(elemBtn);endPos=WebForm_GetElementPosition(elemDest);stopAddAnimation();duration=getDuration(startPos,endPos);elemBox.style.left=startPos.x;elemBox.style.top=startPos.y;elemBox.style.width=elemBtn.offsetWidth;elemBox.style.height=elemBtn.offsetHeight;elemBox.style.display="block";addToDestTweens[0]=t1=new Tween(elemBox.style,"left",null,startPos.x,endPos.x,duration,"px");addToDestTweens[1]=t2=new Tween(elemBox.style,"top",null,startPos.y,endPos.y,duration,"px");addToDestTweens[2]=t3=new Tween(elemBox.style,"width",null,elemBtn.offsetWidth,elemDest.offsetWidth,duration,"px");addToDestTweens[3]=t4=new Tween(elemBox.style,"height",null,elemBtn.offsetHeight,elemDest.offsetHeight,duration,"px");t2.onMotionFinished=function(){elemBox.style.display="none"};t1.start();t2.start();t3.start();t4.start()}catch(i){}}function stopAddAnimation(){if(elemBox=$get("animatedCartBox"),elemBox.style.display="none",addToDestTweens.length>0)for(var n=0,t=addToDestTweens.length;n<t;n++)addToDestTweens[n].stop()}function getDuration(n,t){var i=-1,f=n.x,e=n.y,o=t.x,s=t.y,r=f-o,u=e-s;return i=Math.sqrt(r*r+u*u),i*.0008}function findPosition(n){if(typeof n.offsetParent!="undefined"){for(var t=0,i=0;n;n=n.offsetParent)t+=n.offsetLeft,i+=n.offsetTop;return[t,i]}return[n.x,n.y]}function Delegate(){}function OpacityTween(n,t,i,r,u){this.targetObject=n;this.init({},"x",t,i,r,u)}function DropDownOut(n,t,i){if(overcount<=0&&(t.className="normalheader",i.style.display!="none"&&(i.style.display="none",i.id=="MiniCartDropDown"&&typeof cmCreateElementTag=="function")))try{cmCreateElementTag("miniCartAction","miniCart","close-_-auto-_--_--_-"+getIdForAnalytics())}catch(r){}}function overdropdown(){overcount++}function outdropdown(n,t,i){overcount--;overcount<=0&&(n.timer&&clearTimeout(n.timer),n.timer=setTimeout(function(){DropDownOut(n,t,i)},2e3))}function attachDropDownHooks(n,t){n.onmouseover=function(){overdropdown(this)};n.onmouseout=function(){outdropdown(this,n,t)};t.onmouseover=function(){overdropdown(this)};t.onmouseout=function(){outdropdown(this,n,t)};overcount=1}function closeDropDowns(n,t){var u=!1,r,i;if(openHeaders.length>0)while(openHeaders.length>0)r=openHeaders.pop(),r!=n&&(r.className="normalheader");if(openDropDowns.length>0)while(openDropDowns.length>0)i=openDropDowns.pop(),i!=t&&(i.style.display="none",i.id=="MiniCartDropDown"&&(u=!0));if(u&&typeof cmCreateElementTag=="function")try{cmCreateElementTag("miniCartAction","miniCart","close-_-manual-_--_--_-"+getIdForAnalytics())}catch(f){}}function OpenDropDown(n,t,i,r){if(!DoNotOpen){var f=$get(n),u=$get(t);if(closeDropDowns(f,u),u.style.display=="none"||u.style.display==""){if(f.className="shadowheader",u.style.display="block",t=="MiniCartDropDown"&&typeof cmCreateElementTag=="function")try{cmCreateElementTag("miniCartAction","miniCart","open-_--_--_--_-"+getIdForAnalytics())}catch(e){}i();r&&attachDropDownHooks(f,u);openHeaders.push(f);openDropDowns.push(u)}else f.className="normalheader",u.style.display="none"}}function OpenMiniCartV2(n){n()}function CloseDropDownPopup(){for(var t=document.getElementsByName("dropDownPopupWrapper"),n=0;n<t.length;n++)t[n].innerHTML=""}function processKitPromotion(n,t,i,r,u,f,e,o,s,h){s==undefined&&(s=-1);Melaleuca.Web.AjaxManager.ProcessKitPromotion(n,t,i,o,s,h,processPromotionReturn);r.innerHTML=r.innerHTML.replace(u,f);r.className="disabled";var c=$get("removePromoButton"+n+"_btn");c!=null&&(c.className="disabled")}function AddFlashPromotionToCart(n,t,i,r){Melaleuca.Web.AjaxManager.ProcessFlashPromotion(r,n,t,processPromotionReturn)}function processPromotion(n,t,i,r,u,f,e,o,s,h){var l,c,a;s==undefined&&(s=-1);l=1;o!==undefined&&(c=$get(o),c!=null&&(l=c.options[c.selectedIndex].text));Melaleuca.Web.AjaxManager.ProcessPromotion(n,l,s,e,h,function(n){processPromotionReturn(n)});t!=null&&(t.innerHTML=t.innerHTML.replace(r,u),t.className="disabled",a=$get("removePromoButton"+n+"_btn"),a!=null&&(a.className="disabled"))}function processPromotionBySku(n,t,i,r){Melaleuca.Web.AjaxManager.ProcessPromotionBySku(n,t,i,r,function(n){processPromotionReturn(n)})}function processPromotionReturn(arg){try{arg.Analytics!=null&&eval(arg.Analytics);arg.Javascript!=null&&eval(arg.Javascript)}catch(err){}}function processBogoPromotion(n,t,i,r,u,f){Melaleuca.Web.AjaxManager.ProcessBogoPromotion(n,t,i,u,f,function(u){processPromotionReturnForBOGO(u,n,t,i,r,f);$.isFunction(window.updatePromotions)&&updatePromotions()})}function processBogoPromotionWithPromise(n,t,i,r,u,f){var e=$.Deferred();return Melaleuca.Web.AjaxManager.ProcessBogoPromotion(n,t,i,u,f,function(u){processPromotionReturnForBOGO(u,n,t,i,r,f);e.resolve()}),e}function processPromotionReturnForBOGO(arg,promotionID,sku,qty,maxQtyAllowed,promotions){try{arg.Analytics!=null&&eval(arg.Analytics);arg.Javascript!=null&&eval(arg.Javascript)}catch(err){}promotionID!=null&&sku!=null&&qty!=null&&maxQtyAllowed!=null&&promotions!=null&&Melaleuca.Web.AjaxManager.UpdateBogoItemStateInCartAndUI(sku,promotionID,qty,promotions,RemoveFromCartAndBogoUIReturn)}function RemovePromotionIDs(n){Melaleuca.Web.AjaxManager.RemovePromotions(n,removePromotionReturn)}function RemoveAvailablePromotionIDs(n,t){Melaleuca.Web.AjaxManager.RemoveAvailablePromotions(n,t,removePromotionReturn)}function removePromotion(n,t){Melaleuca.Web.AjaxManager.RemovePromotion(n,t,removePromotionReturn)}function declinePromotionFromWebButton(n,t){Melaleuca.Web.AjaxManager.DeclinePromotionFromWebButton(n,t,removePromotionReturn)}function removePromotionReturn(arg){arg.Javascript!=null&&eval(arg.Javascript)}function processCouponPromotion(n){lastCouponCode=n;Melaleuca.Web.AjaxManager.ProcessCouponPromotion(n,window.location.href,processCouponPromotionReturn)}function processCouponPromotionReturn(arg){var couponCallBack=function(rtnObj){rtnObj&&(rtnObj=eval("("+rtnObj+")"),rtnObj.Success&&getGeneralPopUp(rtnObj.Content))},errorLabel;arg.Javascript!=null&&eval(arg.Javascript);arg.HtmlMessage!=null&&(errorLabel=$get("couponErrorLabel"),errorLabel!=null&&lastCouponCode!="VPK36A"&&lastCouponCode!="HCP59A"?errorLabel.innerHTML=arg.HtmlMessage:lastCouponCode=="VPK36A"?Melaleuca.Web.AjaxManager.GetContentPage("VitaminCertificateVitality4_InvalidCode",couponCallBack):lastCouponCode=="HCP59A"?Melaleuca.Web.AjaxManager.GetContentPage("VitaminCertificateVitality6_InvalidCode",couponCallBack):getGeneralPopUp(arg.HtmlMessage),arg.RedirectURL!=null&&(window.location=arg.RedirectURL));arg.Analytics!=null&&eval(arg.Analytics)}function CouponFocusBlurEventHandler(n,t){var i="";n&&(document.activeElement==n?n.value==t&&(n.value=i):n.value==i&&(n.value=t))}function GetVideoName(n){var i=n,t;return n.length>0&&n.indexOf("/")>-1&&(t=n.split("/"),i=t[t.length-1]),i}function RevertBackDating(n){Melaleuca.Web.AjaxManager.RevertBackDating(n,returnBackDateSelection)}function BackDateSelection(n,t){Melaleuca.Web.AjaxManager.BackDateAction(n,t,returnBackDateSelection)}function returnBackDateSelection(n){n.BackDatingConfirmationContent?getGeneralCenterNoClosePopUp(n.BackDatingConfirmationContent):n.BackDatingConfirmed!=undefined&&n.BackDatingConfirmed==!0&&(n.RedirectUrl!=undefined&&n.RedirectUrl!=""?window.location=n.RedirectUrl:window.location.reload(!0))}function ResetBackDatePrompt(){Melaleuca.Web.AjaxManager.ResetBackDatePrompt(returnBackDateSelection)}function Toggle(n){var t=$get(n);$common.setVisible(t,!$common.getVisible(t))}function FormatPhone(n,t,i){if(i.keyCode!=8&&i.keyCode!=46){var u=t.value.replace(/[^\d]/g,""),r;switch(n){case 1:case 2:r=FormatPhoneUS(u);break;default:r=u}t.value=r}}function FormatPhoneUS(n){var t="",i=n.length;return i>0&&(t="(",i<3?t+=n.substring(0,i):(t+=n.substring(0,3)+") ",t+=i<6?n.substring(3,i):n.substring(3,6)+" - "+n.substring(6,10))),t}function FormatBirthdate(n,t,i){if(i.keyCode!=8&&i.keyCode!=46){var u=t.value.replace(/[^\d]/g,""),r;switch(n){case 1:case 2:r=FormatBirthdateUS(u);break;default:r=u}t.value=r}}function FormatBirthdateUS(n){var t=n.length;return t<2?n.substring(0,t):n.substring(0,2)+"/"+(t<4?n.substring(2,t):n.substring(2,4)+"/"+n.substring(4,8))}function IsValidEmail(n){var t=new RegExp(/^[A-Za-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-Za-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?\.)+[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?$/);return n.match(t)==n}function ReadQueryStringParameters(){for(var r=[],e=window.location.search.substring(1),t=e.split("&"),i,u,f,n=0;n<t.length;n++)i=t[n].indexOf("="),i>0&&(u=t[n].substring(0,i),f=t[n].substring(i+1),r[u]=f);return r}function textCounter(n,t,i){n.value.length>i&&(n.value=n.value.substring(0,i));t.innerHTML=i-n.value.length}function appendCulture(n){var t,i,r,u;return window.location.href.indexOf("culture=")>-1?(i=window.location.href,r=window.location.href.indexOf("culture=")+8,i=i.replace(i.substring(r,r+5),n),t=i):window.location.href.indexOf("?")>-1?(u=window.location.href,urlAddOn=u+"&culture="+n,t=urlAddOn):(t=window.location.href,t=t+"?culture="+n,t.replace("melaleuca.com/?","melaleuca.com/Home?")),t}function EditTextBoxOnFocus(n,t,i){var r=$get(n),u=$get(t);r.value==u.value&&(r.value="",r.className=i)}function EditTextBoxOnBlur(n,t,i){var r=$get(n),u=$get(t);r.value==""&&(r.value=u.value,r.className=i)}function AddProductToCartFromFlash(n,t,i){Melaleuca.Web.AjaxManager.AddProductToCart(n,t,i,function(){window.addToCartRefresh&&addToCartRefresh()})}function setupTextboxClientValidator(n,t){var i={};i.isvalid=!0;i.evaluationfunction=new Function("var isValid = checkTextBoxValidators( $get('"+n+"') ); toggleTextboxValidatorDisplay( isValid, $get('"+t+"' ), '' );return isValid; ");i.style={};typeof Page_Validators!="undefined"&&Page_Validators!=null&&Page_Validators.push(i)}function checkTextBoxValidators(n){var t=!0;if(n!=null&&n.Validators!=null)for(index in n.Validators)if(validator=n.Validators[index],validator.isvalid!=null&&!validator.isvalid){t=!1;break}return t}function checkValidators(n,t){if(n!=null&&n.Validators!=null)for(index in n.Validators)if(validator=n.Validators[index],validator.isvalid!=null)if(validator.isvalid)t.className="";else{t.className="showErrorMessage";break}}function toggleTextboxValidatorDisplay(n,t,i){n?t!=null&&(t.className=i):t!=null&&(t.className="showErrorMessage")}function logException(n,t){try{var i=document.location.href;typeof t=="undefined"&&(t=1);Melaleuca.Web.AjaxManager.LogError(n,i,t)}catch(r){}}function logWarning(n){logException(n,2)}function logInformation(n){logException(n,3)}function scrollTo(n,t){$("html, body").animate({scrollTop:n+"px"},t)}function togglevisibility(n){var t=document.getElementById(n);t.style.display=t.style.display=="block"?"none":"block"}function captureEnter(n){n||(n=window.event);var t=n.keyCode?n.keyCode:n.which;return t==13?!1:!0}function updateHeaderLsdBalance(n){var t=$get("headerLsdBalance");t&&n!=null&&(t.innerHTML=": "+n)}function getCurrencyType(n){switch(n.toLowerCase()){case"en-us":case"es-us":return"USD";case"en-ca":case"fr-ca":return"CAD";case"en-au":return"AUD";case"en-nz":return"NZD";case"en-gb":return"GBP";case"en-ie":case"nl-nl":case"de-de":case"de-at":return"EUR";case"pl-pl":return"PLN";case"en-sg":case"zh-sg":return"SGD";case"en-my":case"zh-my":return"MYR";case"ja-jp":return"JPY";case"ko-kr":return"KRW";case"zh-cn":return"CNY";case"zh-tw":return"TWD";case"zh-hk":return"HKD"}return null}function formatCurrency(n){if(n!==NaN){var t=new Intl.NumberFormat([PageClientData.CustomerCulture],{style:"currency",currency:getCurrencyType(PageClientData.CustomerCulture),currencyDisplay:"symbol"});return t.format(n)}return NaN}function goToLink(n,t){var i=n.type;(i==="click"||i==="keydown"&&n.keyCode===13)&&(window.location.href=t,n.preventDefault(),n.stopPropagation())}function handleFirstTab(n){n.keyCode===9&&(document.body.classList.add("user-is-tabbing"),window.removeEventListener("keydown",handleFirstTab),window.addEventListener("mousedown",handleMouseDownOnce))}function handleMouseDownOnce(){document.body.classList.remove("user-is-tabbing");window.removeEventListener("mousedown",handleMouseDownOnce);window.addEventListener("keydown",handleFirstTab)}function GetSelectedClassName(){return document.getElementById("hdnSelectedItemClassName").value}function closeMenu(n){for(var i=menus[n].menuRoot.getElementsByTagName("li"),t=0;t<i.length;t++)shouldIgnore(i[t])||(i[t].timer&&clearTimeout(i[t].timer),i[t].className=isSelected(i[t],n)?GetSelectedClassName():"")}function attachHooks(n,t){for(var u=n.getElementsByTagName("li"),f=n.getElementsByTagName("a"),e,r,o,i=0;i<u.length;i++)shouldIgnore(u[i])||(isSelected(u[i],t)&&(menus[t].selectedElement=u[i]),u[i].onmouseover=function(){activateMenuWithDelay(this,t,i)},u[i].onmouseout=function(){deactivateMenuWithDelay(this,t)});for(i=0;i<f.length;i++)e=f[i].onclick,e?(r=e.toString(),r=r.substring(r.indexOf("{")+1,r.lastIndexOf("}")),o=r.indexOf("return"),r=o!=null&&o>0?r.replace("return","setTimeout('closeMenu("+t+")', 500); return"):r+"closeMenu("+t+"); ",f[i].onclick=new Function(r)):f[i].onclick=function(){closeMenu(t)}}function shouldIgnore(n){return n.className=="first"||n.className=="last"||n.className=="level2"||n.className=="level3"}function isSelected(n,t){return n?n.className==GetSelectedClassName()||menus[t].selectedElement&&n==menus[t].selectedElement:!1}function activateMenu(n,t){var u,e,o,r,i,s,f;if(closeDropDowns(null,null),menus[t].prevElement&&menus[t].prevElement!=n?deactivateMenu(menus[t].prevElement,t):clearTimeout(n.timer),menus[t].prevElement=n,n.className!="showMenu"){for(n.className="showMenu",u=null,r=0;r<n.childNodes.length;r++)if(i=n.childNodes[r],i!==null&&i.className!=undefined&&i.className.toLowerCase()=="navsidemenu"){u=i;break}if(e=40,u!=null){for(o=0,r=0;r<u.childNodes.length;r++)i=u.childNodes[r],i!==null&&i.className!=undefined&&i.className.toLowerCase().indexOf("headerspacer")>=0&&(o=i.clientHeight);windowHeight=window.innerHeight===undefined?document.documentElement.clientHeight:window.innerHeight;menuPosition=WebForm_GetElementPosition(u);pageScrollY=WebForm_GetScrollY();s=-24;f=s;menuPosition.y-e<pageScrollY?f=s+(pageScrollY+e-menuPosition.y):menuPosition.y+o>windowHeight+pageScrollY&&(f=windowHeight+pageScrollY-(menuPosition.y+o+e),offsetLimit=s-(menuPosition.y-e-pageScrollY),f=Math.max(f,offsetLimit));u.style.top=f+"px"}}}function deactivateMenu(n,t){var r,e,f,u,i;if(!shouldIgnore(n)){if(n.timer&&clearTimeout(n.timer),isSelected(n,t))n.className=GetSelectedClassName();else{for(n.className=" ",r=n.getElementsByTagName("input"),i=0;i<r.length;i++)r[i].blur();for(r=n.getElementsByTagName("a"),i=0;i<r.length;i++)r[i].blur()}for(e=null,i=0;i<n.childNodes.length;i++)if(f=n.childNodes[i],f!==null&&f.className!=undefined&&f.className.toLowerCase()=="navsidemenu"){e=f;break}for(e!=null&&(e.style.top="-24px"),u=n.getElementsByTagName("li"),i=0;i<u.length;i++)shouldIgnore(u[i])||(u[i].timer&&clearTimeout(u[i].timer),u[i].className="")}}function activateMenuWithDelay(n,t){n.timer&&clearTimeout(n.timer);n.timer=setTimeout(function(){activateMenu(n,t)},showDelay)}function deactivateMenuWithDelay(n,t){n.timer&&clearTimeout(n.timer);n.timer=setTimeout(function(){deactivateMenu(n,t)},hideDelay)}function addLoadEvent(n){window.onDomReady=n}function readyState(n){document.readyState=="interactive"&&n()}function DomReady(n){document.addEventListener?document.addEventListener("DOMContentLoaded",n,!1):document.onreadystatechange=function(){readyState(n)}}function initMenu(n){menus[menuIndexer]={};menus[menuIndexer].menuRoot=document.getElementById(n);menus[menuIndexer].selectedElement=null;menus[menuIndexer].prevElement=null;addLoadEvent(attachHooks(menus[menuIndexer].menuRoot,menuIndexer));menuIndexer++}function AjaxRequestAddProductToCartReturn(){}function AddAllSelectedToCart(){var n,t,i;for(skuList="",checkedInputList=$("[name='miniFavoritesItemCheckbox']:checked"),n=0;n<checkedInputList.length;n++)t=parseInt($(checkedInputList[n]).val()),i=parseInt($(checkedInputList[n]).parent().parent().parent().find("[name='quantity']").val()),i&&t&&i>0&&t>0&&(skuList+=t+"."+i+"|");skuList.length>0&&Melaleuca.Web.AjaxManager.AddProductToCartBySkuList(skuList,"MyFavorites",AjaxRequestAddProductToCartBySkuListReturn)}function MyFavoriteList(){var n=$("#myFavoritesContainer"),t=n.is(":visible");t||$.ajax({url:favoritesUrl,type:"GET",contentType:"application/json"}).done(function(t){t&&$("#myFavoritesListv2").html(t);$("#myFavoritesSpinner").hide();n.show()})}function MyCartList(){var n=$get("myCartListv2");n?updateCartData&&updateCartData():Melaleuca.Web.AjaxManager.MyCartList(ReceivedCartList)}function MyCartListWithCartCount(){Melaleuca.Web.AjaxManager.MyCartListWithCartCount(ReceivedCartListWithQuantity)}function rtnAddToFav(n){n=="not authenticated"?GoToPage("SignIn"):window.location=window.location}function AjaxRequestAddProductToCartBySkuListReturn(){GoToPage("Cart")}function txtSkuEntry_OnKeyUp(n,t){t||(t=window.event);var i=t.keyCode?t.keyCode:t.which;if(i==13||i==3){if(QuickShop(n.value,n),i==13)return t.returnValue=!1,!1}else return!0}function btnAddToCart_OnClick(n){var i=n.id.slice(0,n.id.lastIndexOf("_")),r=i.slice(0,i.lastIndexOf("_")+1)+"txtSkuEntry",t=$get(r);t.value!=$("#"+r).attr("placeholder")&&QuickShop(t.value,t)}function QuickShop(n,t){var r,i;n==""||/<|>/g.test(n)||(r=!0,i=n.split("."),i.length==1&&(i[1]="1",r=!1),Melaleuca.Web.AjaxManager.AddProductToCartQuickShop(i[0],i[1],r,QuickShopReturn),t.value="",t.focus())}function ChangeQuantity(n,t){var i,r;i=n+"."+t.value;r="miniCart";Melaleuca.Web.AjaxManager.UpdateProductsInCartBySkuList(i,r,!0,0,ReceivedCartList)}function txtQtyEntry_OnKeyPress(n,t,i){t||(t=window.event);var r=t.keyCode?t.keyCode:t.which;if(r==13||r==3){if(ChangeQuantity(i,n),r==13)return t.returnValue=!1,!1}else return!0}function UpdateQuantity(n,t,i){var r=n+"."+t;Melaleuca.Web.AjaxManager.UpdateProductsInCartBySkuList(r,"miniCart",!0,i,ReceivedCartList)}function RemoveFromCart(n,t,i,r){Melaleuca.Web.AjaxManager.RemoveProductFromCart(n,t,i,r,RemoveFromCartReturn)}function RemoveFromCartReturn(result){result!=null&&(result.Javascript!=null&&eval(result.Javascript),result.HtmlMessage!=null&&(result.HtmlMessage.length==0?typeof updateCartData=="function"&&updateCartData():ReceivedCartList(result.HtmlMessage)),result.Analytics!=null&&eval(result.Analytics),typeof ProductStore!="undefined"&&ProductStore.renderAddToCartPlaceholders&&ProductStore.renderAddToCartPlaceholders())}function ReceivedCartList(result){var cartListNewValue;if(result){result.AjaxCartActionResponse&&result.AjaxCartActionResponse.Javascript&&eval(result.AjaxCartActionResponse.Javascript);result.NetCartCountChange!=null&&updateHeaderCartCount(result.NetCartCountChange);var cartListV1=$get("myCartList"),cartListV2=$get("myCartListv2"),cartList=cartListV2?cartListV2:cartListV1;cartList&&cartListV1?(cartListNewValue=result.CartListReturnValue?result.CartListReturnValue:result,cartList.innerHTML=cartListNewValue):cartList&&cartListV2&&updateCartData&&updateCartData();typeof ProductStore!="undefined"&&ProductStore.renderAddToCartPlaceholders&&ProductStore.renderAddToCartPlaceholders();try{updateHeaderCartCount!=undefined&&(overcount=1)}catch(e){}addToCartRefresh()}}function ReceivedCartListWithQuantity(n){$get("myCartListv2")!=null&&(updateHeaderCartCount(n.Quantity),typeof ProductStore!="undefined"&&ProductStore.renderAddToCartPlaceholders&&ProductStore.renderAddToCartPlaceholders());addToCartRefresh()}function QuickShopReturn(response){try{if(overcount=1,response.Analytics!=null&&eval(response.Analytics),response.Javascript!=null&&eval(response.Javascript),response.HtmlMessage!=null){var cartListV1=$get("myCartList"),cartListV2=$get("myCartListv2"),cartList=cartListV2?cartListV2:cartListV1;cartList&&cartListV1?cartList.innerHTML=response.HtmlMessage:cartList&&cartListV2&&updateCartData&&updateCartData()}addToCartRefresh();response.Promotion!=null&&eval(response.Promotion)}catch(err){}}function mask(n,t,i){var f=getKey(n),u=document.all?document.selection.createRange().text:document.getSelection(),c,s,l,a,r,o,h,v,e;if(caret_pos=getCaretPosition(t),u!=""){for(o=t.value.indexOf(u),h=o+u.length,c=t.value.substr(0,o),l=0,a="",r=0;r<u.length;r++)u.charAt(r)=="/"||u.charAt(r)=="("||u.charAt(r)==")"||u.charAt(r)=="-"||u.charAt(r)==" "?r==l?(c+=u.charAt(r),l++):a+=u.charAt(r):r!=l&&(a+="_");s=a+t.value.substr(h,t.value.length)}else o=caret_pos,h=keyIsEditKey(f)?o:o+1,c=t.value.substr(0,o),v=t.value.length-h,s=t.value.substr(h,v);if(t.value=c,e=t.value.length,i=i.toUpperCase(),!keyIsEditKey(f)&&keyIsNumeric(f)){while(!formatChar(i.charAt(e))&&e<i.length)t.value+=i.charAt(e),s=s.substr(1,s.length-1),caret_pos++,e++;(i=="MM/DD/YYYY"||i=="DD/MM/YYYY"||i=="YYYY/MM/DD")&&(i.charAt(e)!="M"||i.charAt(e+1)!="M"||f==48||f==49||(t.value+="0"),i.charAt(e)=="D"&&i.charAt(e+1)=="D"&&f>51&&f<=57&&(t.value+="0"))}keyIsNumeric(f)&&(t.value.length<i.length||t.selectionStart!=t.selectionEnd)?(t.value+=String.fromCharCode(f),t.focus(),caret_pos=t.value.length,n.returnValue=!1,t.isDirty=!0,n.preventDefault&&n.preventDefault()):keyIsEditKey(f)?n.returnValue=!0:(n.returnValue=!1,t.isDirty=!0,n.preventDefault&&n.preventDefault());t.value+=s;setSelectionRange(t,caret_pos,caret_pos)}function getCaretPosition(n){var t=0,i;return document.selection?(n.focus(),i=document.selection.createRange(),i.moveStart("character",-n.value.length),t=i.text.length):(n.selectionStart||n.selectionStart=="0")&&(t=n.selectionStart),t}function setSelectionRange(n,t,i){if(n.createTextRange){var r=n.createTextRange();r.collapse(!0);r.moveEnd("character",i);r.moveStart("character",t);r.select()}else n.setSelectionRange&&(n.focus(),n.setSelectionRange(t,i))}function applyMask(n,t,i){for(var e=0,o,u,f,r=0;r<i.length;r++)i.charAt(r)=="#"&&e++;if(o=new RegExp("^\\d{"+e+"}$"),matchRegularExpression(o,t.value)){for(u="",f=0,r=0;r<i.length;r++)i.charAt(r)=="#"?(u+=t.value.charAt(f),++f):u+=i.charAt(r);t.value=u}}function formatChar(n){switch(n){case"#":case"M":case"D":case"Y":return!0;default:return!1}}function getKey(n){return n||(n=window.event),BrowserDetect.browser=="Explorer"?n.keyCode:n.charCode}function keyIsNumeric(n){return n>=48&&n<=57?!0:!1}function keyIsEditKey(n){return n==0}function clearIfMasked(n){if(n.value.charAt(0)=="X"){var t=confirm("Editing this field requires re-entry. Continue?");t==!0?n.value="":n.blur()}}function matchRegularExpression(n,t){return t.match(n)?!0:!1}function ProcessForm(n,t,i){var r;i||(n.parentNode.parentNode.style.visibility="collapse");document.getElementById(t).style.visibility="visible";document.getElementById(t).style.display="table";var f=[],e=document.getElementById(t).parentNode,u=e.getElementsByTagName("input");for(r=0;r<u.length;r++)if(u[r].name.indexOf("fp_")==0){if((u[r].type=="radio"||u[r].type=="checkbox")&&!u[r].checked)continue;f.push([u[r].name,u[r].value])}for(u=document.getElementsByTagName("select"),r=0;r<u.length;r++)u[r].name.indexOf("fp_")==0&&f.push([u[r].name,u[r][u[r].selectedIndex].value]);Melaleuca.Web.AjaxManager.ProcessContentForm(f)}function mksChangeQuantity(n,t,i,r,u,f){var o=n.selectedIndex,c=$get(t),a=$get(i),v=$get(r),s=$get(u),l=$get(f),h,e;if(o>0)for(l.className="",s.style.display="",a.innerHTML=c.options[o].text,v.innerHTML=c.options[o].value,h=s.getElementsByTagName("li"),e=0;e<h.length;e++)h[e].style.display=e<o?"":"none";else l.className="disabled",s.style.display="none"}function checkConfigurations(n,t,i){var c=$get(i),l=$get(n),f=getSelectedValueFromDropDown(t),r,o,u,s,e,h;if(f===null&&(f=0),f>0){for(r=!0,o=l.getElementsByTagName("li"),u=0;u<o.length;u++)if(u<f){for(s=o[u].getElementsByTagName("select"),e=0;e<s.length;e++)if(h=s[e],h.selectedIndex==0){r=!1;break}if(!r)break}return c.style.display=r?"none":"block",r}return!1}function getMultiKitConfigList(n,t,i){var l=$get(n),u=getSelectedValueFromDropDown(t),r,o,c,f,e,y,s;if(u===null&&(u=0),u>0){var h=!0,a=new Array(u),v=l.getElementsByTagName("li");for(r=0;r<v.length;r++)if(r<u){for(o=v[r].getElementsByTagName("select"),c=new Array(o.length),f=0;f<o.length;f++)if(e=o[f],e.selectedIndex==0){h=!1;break}else y=e.options[e.selectedIndex],s={},s.Feature=e.options[0].value,s.Selection=y.value,c[f]=s;if(a[r]=c,!h)break}return h?(i&&toggleSelects(l,$get(t),!0),a):null}return null}function toggleSelects(n,t,i){for(var u=n.getElementsByTagName("select"),r=0;r<u.length;r++)u[r].disabled=i;t.disabled=i}function checkRBKitConfigurations(n,t){for(var o=$get(t),f=n.split("|"),r=!0,e,u,i=0;i<f.length;i++)if(e=document.getElementsByName(f[i]),u=getCheckedValue(e),u==null||u==""){r=!1;break}return o.style.display=r?"none":"block",r}function getRBKitConfigList(n,t){for(var r=n.split("|"),o=new Array(r.length),f=!0,u,i=0;i<r.length;i++){var s=document.getElementsByName(r[i]),h=r[i].split("kit")[0],e=getCheckedValue(s);if(e==null||e==""){f=!1;break}else u={},u.Feature=h,u.Selection=e,o[i]=u;if(!f)break}return f?(t,new Array(o)):null}function getCheckedValue(n){var i,t;if(!n)return"";for(i=n.length,t=0;t<i;t++)if(n[t].checked)return n[t].value;return""}function getKitFeatures(n,t){for(var v=$get("kitSelector"),h=!0,o=[],c="PromotionID:"+n,l=v.getElementsByTagName("li"),f,s,r,u,a,e,i=0;i<l.length;i++){for(f=l[i].getElementsByTagName("select"),s=new Array(f.length),r=0;r<f.length;r++)u=f[r],u.selectedIndex==0?h=!1:(a=u.options[u.selectedIndex],e={},e.Feature=u.options[0].value,e.Selection=a.value,s[r]=e);o[i]=s}h&&(n>0?Melaleuca.Web.AjaxManager.ProcessKitPromotion(n,t,1,o,-1,c,!1):Melaleuca.Web.AjaxManager.AddMultipleKitsToCart(t,c,o,1,0))}function checkConfiguration(){for(var o=$get("kitSelector"),f=!0,e=o.getElementsByTagName("li"),i,t,r,u,n=0;n<e.length;n++)for(i=e[n].getElementsByTagName("select"),t=0;t<i.length;t++)r=i[t],u=$get(r.options[0].value),r.selectedIndex==0?(u.style.visibility="visible",f=!1):u.style.visibility="hidden";return f}function populateModalGroupSelector(n){$get("productGroupSelectorContainer").innerHTML=n}function populateLargeModalGroupSelector(n){$get("productGroupSelectorLargeContainer").innerHTML=n}function showProductGroupPopup(n,t){t==1?(Melaleuca.Web.AjaxManager.GetProductGroupSelector(n,t,populateLargeModalGroupSelector),$get("productGroupSelectorLargeContainer").innerHTML="",showModalPopup("groupSelectorLargePopup")):(Melaleuca.Web.AjaxManager.GetProductGroupSelector(n,t,populateModalGroupSelector),$get("productGroupSelectorContainer").innerHTML="",showModalPopup("groupSelectorPopup"))}function selectGroupItem(n,t,i,r,u,f,e,o,s,h,c,l,a){t.className="categoryItem selected";$get("pgsProductName").innerHTML="<a href='javascript:;' onclick='gotoProductPage("+r+"); return false;'>"+i+"<\/a>";$get("pgsProductNumber").style.display="block";$get("pgsSku").innerHTML=r;$get("pgsSelectedImage").src=baseImagePath+"/"+u;$get("pgsSelectSku").value=r;$get(h).innerHTML=f;$get(c).innerHTML=e;$get(l).innerHTML=o;$get(a).innerHTML=s;n.className="";categoryItems=document.getElementsByName(t.name);for(var v=0,y=categoryItems.length;v<y;v++)categoryItems[v].className="categoryItem"}function initializeKitSelectorUI(){var t;selectionListMaskDiv=$get("selectionListMask");selectionListItemsDiv=$get("selectionListItems");slBtnUp=$get("slBtnUp");slBtnDown=$get("slBtnDown");var i=$get("selectionListContent"),r=$get("selectionListFooter"),n=$get("selectionListFooterText");n.offsetHeight>20&&(n.offsetHeight>300&&(n.offsetHeight=200,n.style.height="200px",n.style.overflowY="scroll",n.style.overflowX="hidden"),t=n.offsetHeight-10,i.style.height=i.offsetHeight-t+"px",selectionListMaskDiv.style.height=selectionListMaskDiv.offsetHeight-t+"px",r.style.height=r.offsetHeight+t-2+"px");selectionListItemsDiv.offsetHeight>selectionListMaskDiv.offsetHeight&&(slBtnDown.className="btnDown");resetPageItems()}function gotoSelectionGroup(n){var r,f;if(currentSelectionGroupID=n,$(".select-group").hide(),$("#selectGroup"+currentSelectionGroupID).show(),$(".kitSelectionListItem").removeClass("selected"),$("#selectionListItem"+currentSelectionGroupID).addClass("selected"),$get("txtCurrentStep").innerHTML=currentSelectionGroupID+1,r=getListPosition(),f=getHeightDiff(),f<0&&typeof newSelectionListItemDiv!="undefined"&&typeof selectionListMaskDiv!="undefined"){var t=newSelectionListItemDiv.offsetTop,u=newSelectionListItemDiv.offsetHeight,e=selectionListMaskDiv.offsetHeight,i;r+t+u>e?(i=t+u-e,tweenTo(0-i)):r+t+u<0&&(i=t,tweenTo(0-i))}}function resetFeatureSelections(n){for(var u=document.getElementsByName("selectionItem"+n),i,t=0,r=u.length,f=r-r%3-1;t<r;t++)i="selectionItemContainer",t%3==0&&(i+=" firstInRow"),t>f&&f>=5&&(i+=" lastRow"),t==r-1&&t%3!=2&&(i+=" lastItem"),u[t].className=i}function getSelectedItems(n){for(var i=document.getElementsByName("selectionItem"+n),r=[],t=0;t<i.length;t++)i[t].className.indexOf("selected")>-1&&r.push(t);return r}function reselectItems(n,t){for(var r=document.getElementsByName("selectionItem"+n),i=0;i<t.length;i++)r[t[i]].className+=" selected"}function selectItem(n,t,i,r){resetFeatureSelections(t);n.className+=" selected";kitConfigurationArray[t].Selection=i;$get("listName"+t).innerHTML=r;$("#listCheck"+t).show();var u=t+1;kitConfigurationArray.length>u&&gotoSelectionGroup(u);updatePageItems()}function resetPageItems(){var t,n,i;for(externalAddToCartButtonID!==null&&(t=$get(externalAddToCartButtonID),t!==null&&(t.disabled=!0)),n=0;n<kitConfigurationArray.length;n++)i=getSelectedItems(n),resetFeatureSelections(n),reselectItems(n,i),i.length>0?$("#listCheck"+n).show():$("#listCheck"+n).hide();$get("txtCurrentStep").innerHTML=currentSelectionGroupID+1;gotoSelectionGroup(currentSelectionGroupID)}function updatePageItems(){for(var i=0,t,n=0;n<kitConfigurationArray.length;n++)kitConfigurationArray[n].Selection!==null&&i++;i==kitConfigurationArray.length&&externalAddToCartButtonID!==null&&(t=$get(externalAddToCartButtonID),t!==null&&(t.disabled=!1))}function scrollBtnMouseDown(n){clearTimeout(scrollDelayTimer);n==slBtnUp?(scrollDelayPassed=!1,scrollDelayTimer=setTimeout("startSelectionListScroll(0)",scrollDelayInterval)):n==slBtnDown&&(scrollDelayPassed=!1,scrollDelayTimer=setTimeout("startSelectionListScroll(1)",scrollDelayInterval))}function scrollBtnMouseUp(n){var r,i,t;clearTimeout(scrollDelayTimer);scrollDelayPassed?stopSelectionListScroll():(r=getListPosition(),i=getHeightDiff(),i<0&&(n==slBtnUp?(t=r+clickScrollAmount,t>0&&(t=0)):n==slBtnDown&&(t=r-clickScrollAmount,t<i&&(t=i)),tweenTo(t)))}function startSelectionListScroll(n){scrollDelayPassed=!0;var i=getListPosition(),t=getHeightDiff();stopSelectionListScroll();switch(n){case 0:t<0&&i<0&&(slBtnDown.className="btnDown",selectionListScrollTimer=setInterval("scrollUp()",scrollInterval));break;case 1:t<0&&i>t&&(slBtnUp.className="btnUp",selectionListScrollTimer=setInterval("scrollDown()",scrollInterval))}}function scrollUp(){var n=getListPosition();n<=0-scrollAmount?selectionListItemsDiv.style.top=n+scrollAmount+"px":(stopSelectionListScroll(),selectionListItemsDiv.style.top="0px",slBtnUp.className="btnUp disabled")}function scrollDown(){var n=getListPosition(),t=getHeightDiff();n>=t+scrollAmount?selectionListItemsDiv.style.top=n-scrollAmount+"px":(stopSelectionListScroll(),selectionListItemsDiv.style.top=t+"px",slBtnDown.className="btnDown disabled")}function getListPosition(){return new Number(selectionListItemsDiv.style.top.replace(/px/,""))}function getHeightDiff(){return selectionListMaskDiv.offsetHeight-selectionListItemsDiv.offsetHeight}function tweenTo(n){selectionListScrollTween!=null&&selectionListScrollTween.stop();selectionListScrollTween=new Tween(selectionListItemsDiv.style,"top",Tween.strongEaseOut,getListPosition(),n,.5,"px");selectionListScrollTween.onMotionFinished=function(){updateButtonStates()};selectionListScrollTween.start()}function updateButtonStates(){var n=getListPosition(),t=getHeightDiff();slBtnUp.className=n<0?"btnUp":"btnUp disabled";slBtnDown.className=n>t?"btnDown":"btnDown disabled"}function kitScrollTo(n){selectionListItemsDiv.style.top=n+"px";updateButtonStates()}function stopSelectionListScroll(){clearInterval(selectionListScrollTimer)}function getKitConfiguration(){return kitConfigurationArray}function rtnAddKitToCart(rtn){try{closeModalPopup("kitConfigPopup");rtn.Analytics!=null&&eval(rtn.Analytics);rtn.Javascript!=null?(eval(rtn.Javascript+callBackJavascript),updatePromotions()):rtn.HtmlMessage!=null&&alert(rtn.HtmlMessage);rtn.Promotion!=null&&eval(rtn.Promotion);$(".btnUpdateCart").length>0&&__doPostBack("","")}catch(err){}}function populateModalKitConfig(rtn){rtn.Analytics!=null&&eval(rtn.Analytics);rtn.Javascript!=null?eval(rtn.Javascript):rtn.HtmlMessage!=null&&($get("kitConfigContainer").innerHTML="",showModalPopup("kitConfigPopup"),resultArr=rtn.HtmlMessage.split("||KitConfigJavascript||"),$get("kitConfigContainer").innerHTML=resultArr[0],eval(resultArr[1]))}function showKitConfigPopup(n,t,i,r,u){t&&t!=""&&t!=0||(t=null);i&&i!=""&&i!=0||(i=null);callBackJavascript=u;var f=[];f.push("/ProductStore/KitConfiguration/KitConfiguration","?sku=",n,"&lineTypeIden=",t,"&promotionID=",i,"&revenueSource=",r);Popup.displayPopup(f.join(""),null,!0)}function editKitConfig(n,t,i,r,u){r&&r!=""&&r!=0||(r=null);u&&u!=""||(u="Unknown");var f=[];f.push("/ProductStore/KitConfiguration/KitConfiguration","?sku=",n,"&configurationIndex=",i,"&lineTypeIden=",t,"&promotionID=",r,"&revenueSource=",u);Popup.displayPopup(f.join(""),null,!0)}function removeKitConfig(n,t,i){Melaleuca.Web.AjaxManager.RemoveKitConfigFromCart(n,t,i,rtnRemoveKitConfig)}function removeKitConfig(n,t,i){Melaleuca.Web.AjaxManager.RemoveKitConfigFromCart(n,t,i,rtnRemoveKitConfig)}function rtnRemoveKitConfig(rtn){rtn.Javascript!=null&&eval(rtn.Javascript);addToCartRefresh()}function copyKitConfig(n,t,i){Melaleuca.Web.AjaxManager.DuplicateKitConfigFromCart(n,t,i,rtnCopyKitConfig)}function rtnCopyKitConfig(rtn){rtn.Javascript!=null&&eval(rtn.Javascript);rtn.HasErrorInRequestedAction||addToCartRefresh()}function pkbInitializeKitSelectorUI(){pkbCurrentSelectionGroupID=0;pkbSelectionListItemsDiv=$get("pkbSelectionsListContent");pkbSelectionListMaskDiv=$get("pkbSelectionsListScrollWindow");pkbScrollBtnUp=$get("pkbScrollBtnUp");pkbScrollBtnDown=$get("pkbScrollBtnDown");pkbSelectionListItemsDiv.offsetHeight>pkbSelectionListMaskDiv.offsetHeight&&(pkbScrollBtnDown.className="btnDown");pkbResetPageItems()}function pkbGotoSelectionGroup(n){var i,t,f,o;if($get("pkbSelectGroup"+pkbCurrentSelectionGroupID).style.display="none",i=$get("pkbSelectionsListRow"+pkbCurrentSelectionGroupID),i.className=i.className=="disabledselected"?"disabledGreen":i.className.replace("selected",""),pkbCurrentSelectionGroupID=n,$get("pkbSelectGroup"+n).style.display="block",t=$get("pkbSelectionsListRow"+n),t.className=="disabledGreen"?t.className="disabledselected":t.className+="selected",f=pkbGetListPosition(),o=pkbGetHeightDiff(),o<0){var r=t.offsetTop,e=t.offsetHeight,s=pkbSelectionListMaskDiv.offsetHeight,u;f+r+e>s?(u=r+e-s,pkbTweenTo(0-u)):f+r+e<0&&(u=r,pkbTweenTo(0-u))}}function pkbResetFeatureSelections(n){for(var u=document.getElementsByName("pkbSelectionItem"+n),f,t,i=0,r=u.length,e=r-r%3-1;i<r;i++)f="",u[i].className=f;$get("pkbSelectionsListRow"+n).className=$get("pkbSelectionsListRow"+n).className.replace("filled","");pkbOriginalSelectionsListSlotText!=null?(t=pkbOriginalSelectionsListSlotText[n],t==null&&(t=""),$get("pkbSelectionsListSlot"+n).innerHTML=t):$get("pkbSelectionsListSlot"+n).innerHTML="";pkbKitConfigurationArray[n].Selection=null;pkbUpdatePageItems()}function pkbSelectItem(n,t,i,r,u,f){var e,o,s,c,h;for(pkbResetFeatureSelections(t),n.className="selected",pkbKitConfigurationArray[t].Selection=i,pkbKitConfigurationArray[t].Price=r,pkbKitConfigurationArray[t].ProductPoints=u,pkbSkuList="",e=0;e<pkbKitConfigurationArray.length;e++)pkbKitConfigurationArray[e].Selection!==null&&(pkbSkuList+=pkbKitConfigurationArray[e].Selection+".1|");pkbSkuList=pkbSkuList.substr(0,pkbSkuList.length-1);o=$get("pkbSelectionsListRow"+t);o.className=="disabledselected"&&(o.className="disabledGreen");s=$get("pkbSelectionsListSlot"+t);c=pkbOriginalSelectionsListSlotText!=null&&pkbOriginalSelectionsListSlotText[t]!=undefined?pkbOriginalSelectionsListSlotText[t]+f:f;setInnerHtmlAndElide(c,s,s.offsetWidth);h=t+1;pkbKitConfigurationArray.length>h&&pkbGotoSelectionGroup(h);pkbUpdatePageItems()}function pkbResetPageItems(){var t,i,n;for(pkbExternalAddToCartButtonID!==null&&(t=$get(pkbExternalAddToCartButtonID),t!==null&&(t.className="disabled")),n=0;n<pbkIncludedItemCount;n++)i=$get("pkbIncludedListRow"+n),i!=null&&(i.className="disabled");for(n=0;n<pkbKitConfigurationArray.length;n++)pkbKitConfigurationArray[n].Selection=null,pkbResetFeatureSelections(n);pkbGotoSelectionGroup(0)}function pkbUpdatePageItems(){for(var r=0,u=0,f=0,t,i,n=0;n<pkbKitConfigurationArray.length;n++)pkbKitConfigurationArray[n].Selection!==null&&(r++,pkbKitConfigurationArray[n].Price>0&&(u+=parseFloat(pkbKitConfigurationArray[n].Price)),pkbKitConfigurationArray[n].ProductPoints>0&&(f+=parseFloat(pkbKitConfigurationArray[n].ProductPoints)));if($get("pkbKitBundleCurrentCount").innerHTML=r,pkbPopupMode==BUNDLE_MODE&&($get("kitBundlePrice").innerHTML=u.toFixed(2),$get("kitBundlePoints")!=null&&($get("kitBundlePoints").innerHTML=f.toFixed(0))),r==pkbKitConfigurationArray.length&&pkbPopupMode==KIT_MODE||r>=1&&pkbPopupMode==BUNDLE_MODE)for(pkbExternalAddToCartButtonID!==null&&(t=$get(pkbExternalAddToCartButtonID),t!==null&&(t.className="")),n=0;n<pbkIncludedItemCount;n++)i=$get("pkbIncludedListRow"+n),i!=null&&(i.className="disabledGreen");else for(pkbExternalAddToCartButtonID!==null&&(t=$get(pkbExternalAddToCartButtonID),t!==null&&(t.className="disabled")),n=0;n<pbkIncludedItemCount;n++)i=$get("pkbIncludedListRow"+n),i!=null&&(i.className="disabled")}function pkbScrollBtnMouseDown(n){clearTimeout(pkbScrollDelayTimer);n==pkbScrollBtnUp?(pkbScrollDelayPassed=!1,pkbScrollDelayTimer=setTimeout("pkbStartSelectionListScroll(0)",pkbScrollInterval)):n==pkbScrollBtnDown&&(pkbScrollDelayPassed=!1,pkbScrollDelayTimer=setTimeout("pkbStartSelectionListScroll(1)",pkbScrollInterval))}function pkbScrollBtnMouseUp(n){var r,i,t;clearTimeout(pkbScrollDelayTimer);pkbScrollDelayPassed?pkbStopSelectionListScroll():(r=pkbGetListPosition(),i=pkbGetHeightDiff(),i<0&&(n==pkbScrollBtnUp?(t=r+pkbClickScrollAmount,t>0&&(t=0)):n==pkbScrollBtnDown&&(t=r-pkbClickScrollAmount,t<i&&(t=i)),pkbTweenTo(t)))}function pkbStartSelectionListScroll(n){pkbScrollDelayPassed=!0;var i=pkbGetListPosition(),t=pkbGetHeightDiff();pkbStopSelectionListScroll();switch(n){case 0:t<0&&i<0&&(pkbScrollBtnDown.className="btnDown",pkbSelectionListScrollTimer=setInterval("pkbScrollUp()",pkbScrollInterval));break;case 1:t<0&&i>t&&(pkbScrollBtnUp.className="btnUp",pkbSelectionListScrollTimer=setInterval("pkbScrollDown()",pkbScrollInterval))}}function pkbScrollUp(){var n=pkbGetListPosition();n<=0-pkbScrollAmount?pkbSelectionListItemsDiv.style.top=n+pkbScrollAmount+"px":(pkbStopSelectionListScroll(),pkbSelectionListItemsDiv.style.top="0px",pkbScrollBtnUp.className="btnUp disabled")}function pkbScrollDown(){var n=pkbGetListPosition(),t=pkbGetHeightDiff();n>=t+pkbScrollAmount?pkbSelectionListItemsDiv.style.top=n-pkbScrollAmount+"px":(pkbStopSelectionListScroll(),pkbSelectionListItemsDiv.style.top=t+"px",pkbScrollBtnDown.className="btnDown disabled")}function pkbGetListPosition(){return new Number(pkbSelectionListItemsDiv.style.top.replace(/px/,""))}function pkbGetHeightDiff(){return pkbSelectionListMaskDiv.offsetHeight-pkbSelectionListItemsDiv.offsetHeight}function pkbTweenTo(n){pkbSelectionListScrollTween!=null&&pkbSelectionListScrollTween.stop();pkbSelectionListScrollTween=new Tween(pkbSelectionListItemsDiv.style,"top",Tween.strongEaseOut,pkbGetListPosition(),n,.5,"px");pkbSelectionListScrollTween.onMotionFinished=function(){pkbUpdateButtonStates()};pkbSelectionListScrollTween.start()}function pkbUpdateButtonStates(){var n=pkbGetListPosition(),t=pkbGetHeightDiff();pkbScrollBtnUp.className=n<0?"btnUp":"btnUp disabled";pkbScrollBtnDown.className=n>t?"btnDown":"btnDown disabled"}function pkbKitScrollTo(n){pkbSelectionListItemsDiv.style.top=n+"px";pkbUpdateButtonStates()}function pkbStopSelectionListScroll(){clearInterval(pkbSelectionListScrollTimer)}function pkbGetKitConfiguration(){return pkbKitConfigurationArray}function pkbRtnAddKitToCart(rtn){rtn.Analytics!=null&&eval(rtn.Analytics);rtn.Javascript!=null?eval(rtn.Javascript):rtn.HtmlMessage!=null&&alert(rtn.HtmlMessage);addToCartRefresh();rtn.Promotion!=null&&eval(rtn.Promotion)}function pkbPopulateModalKitConfig(rtn){rtn.Analytics!=null&&eval(rtn.Analytics);rtn.Javascript!=null?eval(rtn.Javascript):rtn.HtmlMessage!=null&&($get("ProductKitAndBundleSelectorContent").innerHTML="",showModalPopup("ProductKitAndBundleSelectorPopup"),resultArr=rtn.HtmlMessage.split("||KitConfigJavascript||"),$get("ProductKitAndBundleSelectorContent").innerHTML=resultArr[0],eval(resultArr[1]))}function pkbShowKitConfigPopup(n,t,i,r,u,f,e){t&&t!=""&&t!=0||(t=null);i&&i!=""&&i!=0||(i=null);Melaleuca.Web.AjaxManager.GetProductKitBundleSelector(n,t,null,i,r,u,f,e,pkbPopulateModalKitConfig)}function pkbShowBundleConfigPopup(n,t,i,r,u,f){i&&i!=""&&i!=0||(i=null);r&&r!=""&&r!=0||(r=null);Melaleuca.Web.AjaxManager.GetProductKitBundleSelectorWithList(n,t,i,null,r,u,f,pkbPopulateModalKitConfig)}function setInnerHtmlAndElide(n,t){t.innerHTML=n}function elideInsert(n,t,i,r,u){var e=t.offsetWidth,o=i-(e+r*2),f=(o/r).toFixed(0);return f>=n.length?n:f>0?(t.innerHTML+=n.substr(u,f),elideInsert(n,t,i,r,t.innerHTML.length)):f<0?(t.innerHTML=t.innerHTML.substr(0,t.innerHTML.length+f),elideInsert(n,t,i,r,t.innerHTML.length)):t.innerHTML}function promotionKit(n,t,i,r,u,f,e,o,s,h,c){this.Sku=t;this.PromotionID=n;this.ActionIndex=i!=undefined?i:-1;this.PromotionKitFeatures=r;this.MaxQty=u;this.QtyValidationFeedBack=f;this.UserSelectionFeedBack=e;this.IsUserSelectionValid=!1;this.IsQtyValid=!1;this.QtyMatches=!1;this.AddToCartButtonObj=$get(s);this.QtyMatchFeedBack=o;this.TrackingSource=h;this.HasPlacedOrder=!1;this.ButtonSpacerID=c;this.SetUserQtyChangeEvent()}function promotionKitFeature(n,t,i){this.Sku=n;this.PromotionKitItems=t;this.FeedBackObj=$get(i)}function promotionKitItem(n,t,i,r){this.DropDownObj=$get(n);this.Sku=t;this.PreDefinedKitString=i;this.ConfigIndex=r}function setUniqueRadioButton(n,t){re=new RegExp(n);var r=document.getElementById("tblkitFeatureContainer").getElementsByTagName("input");for(i=0;i<r.length;i++)elm=r[i],elm.type=="radio"&&re.test(elm.name)&&(elm.checked=!1);t.checked=!0}function reSetDropDownQuantity(){var n=document.getElementById("tblkitFeatureContainer").getElementsByTagName("select");for(i=0;i<n.length;i++)elm=n[i],elm.className=="kitItemQtySelect"&&(elm.selectedIndex=0)}function setDropDownQuantityToOne(n){this.DropDownObj=n;this.DropDownObj.options[1].selected=!0;this.DropDownObj.onchange()}function showLimitedPurchaseOrderPopup(){ProductStore.showLimitedPurchaseOrderPopup()}function OnCartStateChange(){var n,t="cartstatechange";n=typeof window.CustomEvent=="function"?new CustomEvent(t,{}):CustomEvent(t,params);document.dispatchEvent(n)}function CustomEvent(n,t){t=t||{bubbles:!1,cancelable:!1,detail:undefined};var i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t.bubbles,t.cancelable,t.detail),i}function enableWebButton(n){document.getElementById(n).removeAttribute("disabled")}function disableWebButton(n){document.getElementById(n).setAttribute("disabled","disabled")}function getGeneralPopUp(n){typeof DisplayErrorBanner=="function"?DisplayErrorBanner(n):Popup.displayGeneralMessagePopup(n,0,!1)}function closeModalPopup(n){if(n!=null){var t=$find(n);t&&t.hide()}typeof Popup!="undefined"&&Popup.closePopup()}function showKitConfigPopup(n,t,i,r,u){callBackJavascript=u;isMobile?window.location.href="/ProductStore/KitConfiguration/KitConfiguration?sku=".concat(n,"&configurationIndex=",null,"&lineTypeIden=",t,"&promotionID=",i,"&revenueSource=",r):ProductStore.showKitConfigPopup(n,t,i,r)}function showNoFlySurchargePopup(){ProductStore.showNoFlySurchargePopup()}function populateModalKitConfig(n){ProductStore.populateModalKitConfig(n)}function rtnAddToCart(n){ProductStore.addToCartReturn(n)}function rtnAddKitToCart(n){ProductStore.rtnAddKitToCart(n)}function overrideRequiredMessage(n,t){var i=document.getElementById(n);i.oninvalid=function(n){n.target.setCustomValidity("");n.target.validity.valid||n.target.setCustomValidity(t)};i.oninput=function(n){n.target.setCustomValidity("")}}function convertDoubleToSingleByte(n){return n.replace(/[\uFF10-\uFF19]/g,function(n){return String.fromCharCode(n.charCodeAt()-65248)})}function getCustomerOrderHistory(){$.ajax({type:"GET",url:"/ExternalServices/Api/OrderHistory/GetCustomerOrderHistory",data:{},dataType:"json",success:function(n){return n},error:function(n){logException("An error occurred while attempting to retrieve customer's order history. Error: "+n)}})}function getPendingPaymentOrders(){$.ajax({type:"GET",url:"/ExternalServices/Api/OrderHistory/GetPendingPaymentOrders",data:{},dataType:"json",cache:!1,success:function(n){return n},error:function(n){logException("An error occurred while attempting to retrieve pending payment orders. Error: "+n)}})}function WebForm_GetElementPosition(n){var t={},i,r;if(t.x=0,t.y=0,t.width=0,t.height=0,n.offsetParent)for(t.x=n.offsetLeft,t.y=n.offsetTop,i=n.offsetParent;i;)t.x+=i.offsetLeft,t.y+=i.offsetTop,r=i.tagName.toLowerCase(),r!="table"&&r!="body"&&r!="html"&&r!="div"&&i.clientTop&&i.clientLeft&&(t.x+=i.clientLeft,t.y+=i.clientTop),i=i.offsetParent;else n.left&&n.top?(t.x=n.left,t.y=n.top):(n.x&&(t.x=n.x),n.y&&(t.y=n.y));return n.offsetWidth&&n.offsetHeight?(t.width=n.offsetWidth,t.height=n.offsetHeight):n.style&&n.style.pixelWidth&&n.style.pixelHeight&&(t.width=n.style.pixelWidth,t.height=n.style.pixelHeight),t}function WebForm_GetScrollY(){return __nonMSDOMBrowser?window.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body?document.body.scrollTop:0}function OnCartStateChange(){var n,t="cartstatechange";n=typeof window.CustomEvent=="function"?new CustomEvent(t,{}):CustomEvent(t,params);document.dispatchEvent(n)}function CustomEvent(n,t){t=t||{bubbles:!1,cancelable:!1,detail:undefined};var i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t.bubbles,t.cancelable,t.detail),i}function div(n,t){return render(n,t,"div")}function p(n,t){return render(n,t,"p")}function span(n,t){return render(n,t,"span")}function a(n,t){return render(n,t,"a")}function imgtag(n,t){return render(n,t,"img")}function hr(n,t){return render(n,t,"hr")}function table(n,t){return render(n,t,"table")}function tr(n,t){return render(n,t,"tr")}function th(n,t){return render(n,t,"th")}function td(n,t){return render(n,t,"td")}function thead(n,t){return render(n,t,"thead")}function tbody(n,t){return render(n,t,"tbody")}function tfoot(n,t){return render(n,t,"tfoot")}function ul(n,t){return render(n,t,"ul")}function ol(n,t){return render(n,t,"ol")}function li(n,t){return render(n,t,"li")}function dl(n,t){return render(n,t,"dl")}function dt(n,t){return render(n,t,"dt")}function dd(n,t){return render(n,t,"dd")}function h1(n,t){return render(n,t,"h1")}function h2(n,t){return render(n,t,"h2")}function h3(n,t){return render(n,t,"h3")}function h4(n,t){return render(n,t,"h4")}function h5(n,t){return render(n,t,"h5")}function form(n,t){return render(n,t,"form")}function fieldset(n,t){return render(n,t,"fieldset")}function input(n,t){return render(n,t,"input")}function textarea(n,t){return render(n,t,"textarea")}function label(n,t){return render(n,t,"label")}function select(n,t){return render(n,t,"select")}function option(n,t){return render(n,t,"option")}function button(n,t){return render(n,t,"button")}function render(n,t,i){var u="",f="",e,r,o;if(t&&t instanceof Array)for(e in t)t.hasOwnProperty(e)&&(u=u+t[e]);if(n)for(r in n)o=r+(n[r]?'="'+n[r]+'"':""),f=f+" "+o;return"<"+i+f+">"+u+"<\/"+i+">"}function popupCenter(n,t,i,r){var u=window.screenLeft!=undefined?window.screenLeft:screen.left,f=window.screenTop!=undefined?window.screenTop:screen.top,e=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,o=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,s=e/2-i/2+u,h=o/2-r/2+f,c=window.open(n,t,"scrollbars=yes, width="+i+", height="+r+", top="+h+", left="+s)}function closeModal(){$("#surveyModal").hasClass("sm-show")&&$("#surveyModal").removeClass("sm-show").addClass("sm-hide")}function displaySurvey(){$("#surveyModal").hasClass("sm-hide")&&$("#surveyModal").removeClass("sm-hide").addClass("sm-show")}function ShowMenuPopup(n){clearTimeout(menuOpenTimer);menuOpenTimer=setTimeout(function(){ShowMenuPopupNow(n)},200)}function ShowMenuPopupNow(n){var t=$("[data-popup-id='"+n+"']");HideMenuPopupsNow();CancelPopupClose();t.addClass("is-visible");t.length>0&&$("[data-self-id='"+n+"']").addClass("is-preview");SetPopupPosition(t,n);SetupPopupContents(t)}function SetPopupPosition(n,t){var s=n.attr("data-is-positioned")!=undefined,f,u,i,r,e,o;if(!s){if(f=$("[data-self-id="+t+"]"),u={},u.$object=f,u.width=u.$object.outerWidth(),u.left=u.$object.offset().left,i={},i.width=n.outerWidth(!0),i.halfWidth=i.width/2,r={},r.$object=$(".nav-popup-wrapper"),r.left=r.$object.offset().left,r.width=r.$object.outerWidth(),r.halfWidth=r.width/2,f.length==0||n.length==0)return;i.left=r.halfWidth-i.halfWidth;o=0;do{var h=i.left+i.width<r.width&&i.left>0,c=r.left+i.left+i.width<u.left+u.width,l=r.left+i.left>u.left;h?(c?i.left++:l&&i.left--,o++,e=o<r.width):e=!1}while(e);n.css({left:i.left});n.attr("data-is-positioned",!0)}}function SetupPopupContents(n){var u=n.attr("data-is-setup")!=undefined;if(!u){var i=n.find(".popup-content-wrapper"),r=0,t=0;i.children().not(".no-consideration").each(function(){r+=$(this).outerWidth(!0);var n=$(this).outerHeight(!0);t=n>t?n:t});i.css("width",r+1);n.css("width",r+1);i.children().not(".no-consideration").css("height",t);n.attr("data-is-setup",!0)}}function HideMenuPopups(){CancelPopupClose();menuPopupTimer=setTimeout(function(){HideMenuPopupsNow()},300)}function HideMenuPopupsNow(){menuPopupTimer=null;var n=$("[data-popup-id]");n.removeClass("is-visible");$(".nav-sub-item").removeClass("is-preview")}function ShowSubMenu(n){clearTimeout(subMenuChangeTimer);subMenuChangeTimer=setTimeout(function(){ShowSubMenuNow(n)},300)}function ShowSubMenuNow(n){var t,i;$("[data-sub-menu-id]").removeClass("is-preview");t=$("[data-sub-menu-id='"+n+"']");t.not(".is-current").addClass("is-preview");HideAllSubMenus();i=$("[data-parent-id='"+n+"']");i.addClass("is-visible")}function HideAllSubMenus(){$subMenus=$("[data-parent-id]");$subMenus.removeClass("is-visible")}function CancelPopupClose(){clearTimeout(menuPopupTimer);menuPopupTimer=null}function preventChange(n){n.key!="Enter"&&n.key!=" "&&n.key!="Tab"&&event.preventDefault()}var javascriptReady=!1,addToCartRefreshId=null,standardElementAnalyticsAttributes=null,launchModalOnPageLoad,ModalPopupID,showVideoOnPageLoad,pageLoadVideoPath,canOpenMiniCart,canOpenFavorites,addToDestTweens,t,o,DoNotOpen,lastCouponCode,skuArray,caret_pos,ProductStore,__nonMSDOMBrowser,swfobject,Cart,skuDetail,productInventory,menuPopupTimer,menuOpenTimer,subMenuChangeTimer,AlertsObject;launchModalOnPageLoad===undefined&&(launchModalOnPageLoad=!1,ModalPopupID="");showVideoOnPageLoad===undefined&&(showVideoOnPageLoad=!1,pageLoadVideoPath="");PageManager.prototype.SetPageCountLinkStyle=function(n){for(i=0;i<this.PageCountLinkArr.length;i++)this.PageCountLinkArr[i].className=this.PageCountLinkArr[i].id==n.id?"pageCountSelected":"pageCountNotSelected"};canOpenMiniCart=!0;canOpenFavorites=!0;$(document).mouseup(function(n){var t=$("#toolContainer"),i=$(".myCartAndFavoritesContainer");t.has(n.target).length===0&&i.has(n.target).length===0&&n.target!=$("html").get(0)&&($(".utility-container.minicart").hide(),$(".utility-container.favorites").css({visibility:"hidden"}))});String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};String.prototype.lTrim=function(){return this.replace(/^\s*/g,"")};String.prototype.rTrim=function(){return this.replace(/\s*$/g,"")};String.prototype.isEmpty=function(){return this.trim()==""?!0:!1};addToDestTweens=[];Delegate.create=function(n,t){for(var r=[],u=arguments.length,i=2;i<u;i++)r[i-2]=arguments[i];return function(){var i=[].concat(arguments,r);t.apply(n,i)}};Tween=function(n,t,i,r,u,f,e){this.init(n,t,i,r,u,f,e)};t=Tween.prototype;t.obj={};t.prop="";t.func=function(n,t,i,r){return i*n/r+t};t.begin=0;t.change=0;t.prevTime=0;t.prevPos=0;t.looping=!1;t._duration=0;t._time=0;t._pos=0;t._position=0;t._startTime=0;t._finish=0;t.name="";t.suffixe="";t._listeners=[];t.setTime=function(n){this.prevTime=this._time;n>this.getDuration()?this.looping?(this.rewind(n-this._duration),this.update(),this.broadcastMessage("onMotionLooped",{target:this,type:"onMotionLooped"})):(this._time=this._duration,this.update(),this.stop(),this.broadcastMessage("onMotionFinished",{target:this,type:"onMotionFinished"})):n<0?(this.rewind(),this.update()):(this._time=n,this.update())};t.getTime=function(){return this._time};t.setDuration=function(n){this._duration=n==null||n<=0?1e5:n};t.getDuration=function(){return this._duration};t.setPosition=function(n){this.prevPos=this._pos;var t=this.suffixe!=""?this.suffixe:"";this.obj[this.prop]=Math.round(n)+t;this._pos=n;this.broadcastMessage("onMotionChanged",{target:this,type:"onMotionChanged"})};t.getPosition=function(n){return n==undefined&&(n=this._time),this.func(n,this.begin,this.change,this._duration)};t.setFinish=function(n){this.change=n-this.begin};t.geFinish=function(){return this.begin+this.change};t.init=function(n,t,i,r,u,f,e){arguments.length&&(this._listeners=[],this.addListener(this),e&&(this.suffixe=e),this.obj=n,this.prop=t,this.begin=r,this._pos=r,this.setDuration(f),i!=null&&i!=""&&(this.func=i),this.setFinish(u))};t.start=function(){this.rewind();this.startEnterFrame();this.broadcastMessage("onMotionStarted",{target:this,type:"onMotionStarted"})};t.rewind=function(n){this.stop();this._time=n==undefined?0:n;this.fixTime();this.update()};t.fforward=function(){this._time=this._duration;this.fixTime();this.update()};t.update=function(){this.setPosition(this.getPosition(this._time))};t.startEnterFrame=function(){this.stopEnterFrame();this.isPlaying=!0;this.onEnterFrame()};t.onEnterFrame=function(){this.isPlaying&&(this.nextFrame(),setTimeout(Delegate.create(this,this.onEnterFrame),0))};t.nextFrame=function(){this.setTime((this.getTimer()-this._startTime)/1e3)};t.stop=function(){this.stopEnterFrame();this.broadcastMessage("onMotionStopped",{target:this,type:"onMotionStopped"})};t.stopEnterFrame=function(){this.isPlaying=!1};t.continueTo=function(n,t){this.begin=this._pos;this.setFinish(n);this._duration!=undefined&&this.setDuration(t);this.start()};t.resume=function(){this.fixTime();this.startEnterFrame();this.broadcastMessage("onMotionResumed",{target:this,type:"onMotionResumed"})};t.yoyo=function(){this.continueTo(this.begin,this._time)};t.addListener=function(n){return this.removeListener(n),this._listeners.push(n)};t.removeListener=function(n){for(var t=this._listeners,i=t.length;i--;)if(t[i]==n)return t.splice(i,1),!0;return!1};t.broadcastMessage=function(){for(var i=[],n=0;n<arguments.length;n++)i.push(arguments[n]);var r=i.shift(),t=this._listeners,u=t.length;for(n=0;n<u;n++)t[n][r]&&t[n][r].apply(t[n],i)};t.fixTime=function(){this._startTime=this.getTimer()-this._time*1e3};t.getTimer=function(){return(new Date).getTime()-this._time};Tween.backEaseIn=function(n,t,i,r){if(u==undefined)var u=1.70158;return i*(n/=r)*n*((u+1)*n-u)+t};Tween.backEaseOut=function(n,t,i,r){if(u==undefined)var u=1.70158;return i*((n=n/r-1)*n*((u+1)*n+u)+1)+t};Tween.backEaseInOut=function(n,t,i,r){if(u==undefined)var u=1.70158;return(n/=r/2)<1?i/2*n*n*(((u*=1.525)+1)*n-u)+t:i/2*((n-=2)*n*(((u*=1.525)+1)*n+u)+2)+t};Tween.elasticEaseIn=function(n,t,i,r,u,f){var e;return n==0?t:(n/=r)==1?t+i:(f||(f=r*.3),!u||u<Math.abs(i)?(u=i,e=f/4):e=f/(2*Math.PI)*Math.asin(i/u),-(u*Math.pow(2,10*(n-=1))*Math.sin((n*r-e)*2*Math.PI/f))+t)};Tween.elasticEaseOut=function(n,t,i,r,u,f){var e;return n==0?t:(n/=r)==1?t+i:(f||(f=r*.3),!u||u<Math.abs(i)?(u=i,e=f/4):e=f/(2*Math.PI)*Math.asin(i/u),u*Math.pow(2,-10*n)*Math.sin((n*r-e)*2*Math.PI/f)+i+t)};Tween.elasticEaseInOut=function(n,t,i,r,u,f){var f,u,e;return n==0?t:(n/=r/2)==2?t+i:(f||(f=r*.3*1.5),!u||u<Math.abs(i)?(u=i,e=f/4):e=f/(2*Math.PI)*Math.asin(i/u),n<1)?-.5*u*Math.pow(2,10*(n-=1))*Math.sin((n*r-e)*2*Math.PI/f)+t:u*Math.pow(2,-10*(n-=1))*Math.sin((n*r-e)*2*Math.PI/f)*.5+i+t};Tween.bounceEaseOut=function(n,t,i,r){return(n/=r)<1/2.75?i*7.5625*n*n+t:n<2/2.75?i*(7.5625*(n-=1.5/2.75)*n+.75)+t:n<2.5/2.75?i*(7.5625*(n-=2.25/2.75)*n+.9375)+t:i*(7.5625*(n-=2.625/2.75)*n+.984375)+t};Tween.bounceEaseIn=function(n,t,i,r){return i-Tween.bounceEaseOut(r-n,0,i,r)+t};Tween.bounceEaseInOut=function(n,t,i,r){return n<r/2?Tween.bounceEaseIn(n*2,0,i,r)*.5+t:Tween.bounceEaseOut(n*2-r,0,i,r)*.5+i*.5+t};Tween.strongEaseInOut=function(n,t,i,r){return i*(n/=r)*n*n*n*n+t};Tween.regularEaseIn=function(n,t,i,r){return i*(n/=r)*n+t};Tween.regularEaseOut=function(n,t,i,r){return-i*(n/=r)*(n-2)+t};Tween.regularEaseInOut=function(n,t,i,r){return(n/=r/2)<1?i/2*n*n+t:-i/2*(--n*(n-2)-1)+t};Tween.strongEaseIn=function(n,t,i,r){return i*(n/=r)*n*n*n*n+t};Tween.strongEaseOut=function(n,t,i,r){return i*((n=n/r-1)*n*n*n*n+1)+t};Tween.strongEaseInOut=function(n,t,i,r){return(n/=r/2)<1?i/2*n*n*n*n*n+t:i/2*((n-=2)*n*n*n*n+2)+t};OpacityTween.prototype=new Tween;OpacityTween.prototype.constructor=Tween;OpacityTween.superclass=Tween.prototype;o=OpacityTween.prototype;o.targetObject={};o.onMotionChanged=function(n){var i=n.target._pos,t=this.targetObject;t.style.opacity=i/100;t.style["-moz-opacity"]=i/100;t.filters&&(t.filters.alpha.opacity=i)};var openHeaders=[],openDropDowns=[],overcount=0;DoNotOpen=!1;lastCouponCode="";Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(n){var i,u,f,t,r;if(this==null)throw new TypeError('"this" is null or not defined');if(i=Object(this),u=i.length>>>0,typeof n!="function")throw new TypeError("predicate must be a function");for(f=arguments[1],t=0;t<u;){if(r=i[t],n.call(f,r,t,i))return r;t++}return undefined},configurable:!0,writable:!0});Array.prototype.indexOf||(Array.prototype.indexOf=function(n){var i=this.length,t=Number(arguments[1])||0;for(t=t<0?Math.ceil(t):Math.floor(t),t<0&&(t+=i);t<i;t++)if(t in this&&this[t]===n)return t;return-1});Array.prototype.toDeliminatedString||(Array.prototype.toDeliminatedString=function(n){for(var i="",t=0,r=this.length;t<r;t++)i+=this[t],t<r-1&&(i+=n);return i});$.format=function(){var n,i,t;if(arguments.length===0)return"";for(n=arguments,typeof arguments[0]=="object"&&(n=arguments[0]),i=n[0],t=1;t<n.length;t++)i=i.replace(new RegExp("\\{"+(t-1)+"\\}","gm"),n[t]);return i};window.addEventListener("keydown",handleFirstTab);var showDelay=200,hideDelay=500,menus=[],menuIndexer=0;skuArray=[];$(document).ready(function(){try{var n="placeholder"in document.createElement("input");n||$("[placeholder]").focus(function(){var n=$(this);n.val()==n.attr("placeholder")&&n.val("")}).blur(function(){var n=$(this);(n.val()==""||n.val()==n.attr("placeholder"))&&n.val(n.attr("placeholder"))}).blur();$("[placeholder]").parents("form").submit(function(){$(this).find("[placeholder]").each(function(){var n=$(this);n.val()==n.attr("placeholder")&&n.val("")})})}catch(t){logException&&logException("Error in ready event: "+t)}});caret_pos=0;var kitConfigurationArray,selectionListScrollTween,selectionListScrollTimer,scrollDelayTimer,scrollDelayInterval=200,scrollInterval=16,scrollAmount=8,clickScrollAmount=100,scrollDelayPassed=!1,selectionListMaskDiv=null,selectionListItemsDiv=null,slBtnUp=null,slBtnDown=null,externalAddToCartButtonID=null,callBackJavascript=null;var BUNDLE_MODE="bundleMode",KIT_MODE="kitMode",pkbKitConfigurationArray,pkbCurrentSelectionGroupID=0,pkbSelectionListScrollTween,pkbSelectionListScrollTimer,pkbScrollDelayTimer,pkbScrollDelayInterval=200,pkbScrollInterval=16,pkbScrollAmount=8,pkbClickScrollAmount=100,pkbScrollDelayPassed=!1,pkbPopupMode=KIT_MODE,pkbSkuList="",pkbSelectionListMaskDiv=null,pkbSelectionListItemsDiv=null,pkbScrollBtnUp=null,pkbScrollBtnDown=null,pkbExternalAddToCartButtonID=null,pbkIncludedItemCount=0,pkbOriginalSelectionsListSlotText=null;promotionKit.prototype.GenerateQtyMatchFeedbackMessage=function(n,t){return n.indexOf("{0}",0)>0&&(n=n.replace("{0}",t)),n};promotionKit.prototype.SetUserQtyChangeEvent=function(){for(var i=this,t,u,n=0,r=this.PromotionKitFeatures.length;n<r;n++)for(t=0,u=this.PromotionKitFeatures[n].PromotionKitItems.length;t<u;t++)this.PromotionKitFeatures[n].PromotionKitItems[t].DropDownObj.onchange=function(){var n="disabled";i.HasPlacedOrder||i.IsValid()&&(n="");i.AddToCartButtonObj.className=n}};promotionKit.prototype.AddToCart=function(n){var t=this.BundleSelectedKitOptions();t.length>0&&(t[0].PreDefinedKitString!=""&&t[0].PreDefinedKitString!=undefined?this.ProcessBulkKitToCart(t):this.ProcessKitToCart(t,n),this.HasPlacedOrder=!0,this.AddToCartButtonObj.className="disabled",this.DisableQty(),AnimateAddToDest($get(this.ButtonSpacerID),"miniCartIcon"))};promotionKit.prototype.ProcessBulkKitToCart=function(n){for(var r={},i=this.BundleBulkKitQtyOptions(n),t=0,u=i.length;t<u;t++)r[i[t].Feature+"_"+t]={Qty:i[t].Qty,Sku:this.Sku,CustomConfigIndex:i[t].ConfigIndex,CustomConfigString:i[t].PreDefinedKitString};Melaleuca.Web.AjaxManager.ProcessBulkPromotionAdd(this.PromotionID,r,!0,processPromotionReturn)};promotionKit.prototype.ProcessKitToCart=function(n,t){Melaleuca.Web.AjaxManager.ProcessKitPromotion(this.PromotionID,this.Sku,n.length,n,this.ActionIndex,this.TrackingSource,!1,function(n){processPromotionReturn(n);t()})};promotionKit.prototype.BundleBulkKitQtyOptions=function(n){for(var r=[],u,i,e,t=0,f=n.length;t<f;t++)for(i=0,e=n[t].length;i<e;i++)u=this.FindFeatureAndSelectionObjIndex(r,n[t][i]),u<0?(n[t][i].Qty=1,r[r.length]=n[t][i]):r[u].Qty+=1;return r};promotionKit.prototype.BundleSelectedKitOptions=function(){var u=[],f,t,i,r,n,e;if(this.IsValid()&&this.PromotionKitFeatures.length>0)for(f=this.PromotionKitFeatures[0].TotalQty(),t=this.GetPromotionKitFlatObject(),r=0;r<f;r++){for(i=[],n=0,e=t.length;n<e;n++)t[n]==undefined||this.FindFeatureObj(i,t[n])||(i[i.length]=t[n],delete t[n]);u[r]=i}return u};promotionKit.prototype.IsValid=function(){return this.Validate(),this.IsUserSelectionValid&&this.IsQtyValid&&this.QtyMatches};promotionKit.prototype.Validate=function(){this.ValidateUserSelection();this.IsUserSelectionValid&&(this.ValidateQty(),this.IsQtyValid&&this.ValidateQtyMatch())};promotionKit.prototype.ValidateUserSelection=function(){for(var t=!0,i=this.GetLargestQty(),n=0,r=this.PromotionKitFeatures.length;n<r;n++)this.PromotionKitFeatures[n].IsUserSelectionValid()||i==0?this.DisplayFeedBack(this.PromotionKitFeatures[n],"",!1):(t=!1,this.DisplayFeedBack(this.PromotionKitFeatures[n],this.UserSelectionFeedBack,!0));this.IsUserSelectionValid=t&&i>0};promotionKit.prototype.ValidateQty=function(){for(var t=!1,n=0,i=this.PromotionKitFeatures.length;n<i;n++)this.PromotionKitFeatures[n].IsQtyValid(this.MaxQty)?this.DisplayFeedBack(this.PromotionKitFeatures[n],"",!1):(t=!0,this.DisplayFeedBack(this.PromotionKitFeatures[n],this.QtyValidationFeedBack,!0));this.IsQtyValid=!t};promotionKit.prototype.ValidateQtyMatch=function(){for(var i=!1,r=this.GetLargestQty(),t=0,f=this.PromotionKitFeatures.length,n=0,u=f;n<u;n++)t=this.PromotionKitFeatures[n].TotalQty(),t<r?(i=!0,this.DisplayFeedBack(this.PromotionKitFeatures[n],this.GenerateQtyMatchFeedbackMessage(this.QtyMatchFeedBack,r-t),!0)):this.DisplayFeedBack(this.PromotionKitFeatures[n],"",!1);this.QtyMatches=!i};promotionKit.prototype.GetLargestQty=function(){for(var t=0,i=0,u=this.PromotionKitFeatures.length,n=0,r=u;n<r;n++)i=this.PromotionKitFeatures[n].TotalQty(),i>t&&(t=i);return t};promotionKit.prototype.GetTotalSelectedCount=function(){for(var t=0,n=0,i=this.PromotionKitFeatures.length;n<i;n++)t+=this.PromotionKitFeatures[n].TotalQty();return t};promotionKit.prototype.DisplayFeedBack=function(n,t,i){i?(n.FeedBackObj.innerHTML=t,n.FeedBackObj.style.display="block"):n.FeedBackObj.style.display="none"};promotionKit.prototype.GetPromotionKitFlatObject=function(){for(var i=[],r=0,t,f,n=0,u=this.PromotionKitFeatures.length;n<u;n++)for(t=0,f=this.PromotionKitFeatures[n].PromotionKitItems.length;t<f;t++)if(r=this.PromotionKitFeatures[n].PromotionKitItems[t].SelectedQty(),r>0)for(iii=0;iii<r;iii++)i[i.length]={Feature:this.PromotionKitFeatures[n].Sku,Selection:this.PromotionKitFeatures[n].PromotionKitItems[t].Sku,PreDefinedKitString:this.PromotionKitFeatures[n].PromotionKitItems[t].PreDefinedKitString,ConfigIndex:this.PromotionKitFeatures[n].PromotionKitItems[t].ConfigIndex};return i};promotionKit.prototype.DisableQty=function(){for(var n=0,t=this.PromotionKitFeatures.length;n<t;n++)this.PromotionKitFeatures[n].DisableQty()};promotionKit.prototype.FindFeatureObj=function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i].FeatureSku==t.FeatureSku)return!0;return!1};promotionKit.prototype.FindFeatureAndSelectionObjIndex=function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i].Feature==t.Feature&&n[i].Selection==t.Selection)return i;return-1};promotionKitFeature.prototype.IsUserSelectionValid=function(){for(var t=!1,n=0,i=this.PromotionKitItems.length;n<i;n++)this.PromotionKitItems[n].IsUserSelectionValid()&&(t=!0);return t};promotionKitFeature.prototype.IsQtyValid=function(n){return this.TotalQty()<=n};promotionKitFeature.prototype.TotalQty=function(){for(var t=0,n=0,i=this.PromotionKitItems.length;n<i;n++)t+=this.PromotionKitItems[n].SelectedQty();return t};promotionKitFeature.prototype.DisableQty=function(){for(var n=0,t=this.PromotionKitItems.length;n<t;n++)this.PromotionKitItems[n].DropDownObj.disabled=!0};promotionKitItem.prototype.SelectedQty=function(){var t=this.DropDownObj.options[this.DropDownObj.selectedIndex],n=parseInt(t.value);return isNaN(n)&&(n=0,t.value=n,t.text=n),n};promotionKitItem.prototype.IsUserSelectionValid=function(){return this.SelectedQty()>0};ProductStore={};ProductStore.addToCart=function(n,t,i){var r,u,f,e,o,s;return t.preventDefault?t.preventDefault():t.returnValue=!1,r=$(n).parents(".atc"),u=r.attr("sku"),u&&(f=r.attr("revenueSource"),f&&f.length!=0||(f="Unknown"),e=$.Deferred(),r.hasClass("atc-kit")?r.hasClass("mobile")?window.location.href="/ProductStore/KitConfiguration/KitConfiguration?sku="+u+"&revenueSource="+f:$.ajax({url:"/ProductStore/KitConfiguration/IsKitConfigurationPopupAvailable",type:"GET",cache:!1,complete:function(n){n.responseJSON.IsAvailable?Popup.displayPopup("/ProductStore/KitConfiguration/KitConfiguration?sku="+u+"&revenueSource="+f,null,!0):GoToPage("SignIn")}}):r.hasClass("atc-group-large")||r.hasClass("atc-group")?this.showProductGroupPopup(u,r.hasClass("atc-group-large")?"1":"0"):(o=r.find("input[type=text]").val(),s=!0,o===undefined&&(o=1,s=!1),i?Melaleuca.Web.AjaxManager.AddProductToCartQuickShop(u,o,s,function(t){ProductStore.addToCartReturn(t);t.HasErrorInRequestedAction===!1&&AnimateAddToDest(n,"btnShowMiniCart");e.resolve(t)}):Melaleuca.Web.AjaxManager.AddProductToCart(u,o,f,null,function(t){ProductStore.addToCartReturn(t);t.HasErrorInRequestedAction===!1&&AnimateAddToDest(n,"btnShowMiniCart");e.resolve(t)}))),OnCartStateChange(),e!=undefined?e.promise():null};ProductStore.showKitConfigPopup=function(n,t,i,r){t&&t!=""&&t!=0||(t=null);i&&i!=""&&i!=0||(i=null);var u=[];u.push("/ProductStore/KitConfiguration/KitConfiguration","?sku=",n,"&lineTypeIden=",t,"&promotionID=",i,"&revenueSource=",r);Popup.displayPopup(u.join(""),null,!0)};ProductStore.showNoFlySurchargePopup=function(){var n=[];n.push("/ProductStore/Common/NoFlySurchargePrompt");Popup.displayPopup(n.join(""),null,!0)};ProductStore.showLimitedPurchaseOrderPopup=function(){var n=[];n.push("/ProductStore/Common/LimitedPurchaseOrderPrompt");Popup.displayPopup(n.join(""),null,!0)};ProductStore.showProductGroupPopup=function(n,t){Melaleuca.Web.AjaxManager.GetProductGroupSelector(n,t,function(n){$.when(Popup.displayGeneralMessagePopup(n,0,!1).then(function(){t==1&&$(".mfp-content .popupContent").css("width","913px")}))})};ProductStore.populateModalKitConfig=function(rtn){if(rtn.Analytics!=null&&eval(rtn.Analytics),rtn.Javascript!=null)eval(rtn.Javascript);else if(rtn.HtmlMessage!=null){var resultArr=rtn.HtmlMessage.split("||KitConfigJavascript||"),promise=Popup.displayGeneralMessagePopup(resultArr[0],0,!1);promise.then(function(){eval(resultArr[1])})}};ProductStore.renderAddToCartPlaceholders=function(n){var i,t;(n===undefined||n==null)&&(n=!1);var u="",r=null,f=$("div[addtocart]");for(i=0;i<f.length;i++)t=$(f[i]),t.attr("sku")&&(u+=t.attr("sku")+","),r==null&&t.attr("revenueSource")&&(r=t.attr("revenueSource"));Melaleuca.Web.AjaxManager.RenderAddToCartPlaceholders(u,n,r,function(n){var u=$("div[addtocart]"),i,t,r,f;for(i in n)for(t=0;t<u.length;t++)if(r=$(u[t]),r.attr("sku")==i){f=n[i];r.replaceWith(f.Html);break}})};ProductStore.addToCartReturn=function(rtn){try{rtn.Analytics!=null&&eval(rtn.Analytics);closeModalPopup("groupSelectPopup");rtn.Javascript!=null?eval(rtn.Javascript):rtn.HtmlMessage!=null&&alert(rtn.HtmlMessage);rtn.Promotion!=null&&eval(rtn.Promotion);var index=document.location.pathname.lastIndexOf("/")+1,pageName=document.location.pathname.substr(index);pageName.toLowerCase()=="cart"&&typeof Cart!="undefined"&&Cart.UpdateCart()}catch(err){}};ProductStore.rtnAddKitToCart=function(rtn){try{var index=document.location.pathname.lastIndexOf("/")+1,pageName=document.location.pathname.substr(index);pageName.toLowerCase()=="cart"&&typeof Cart!="undefined"&&Cart.UpdateCart();closeModalPopup("kitConfigPopup");rtn.Analytics!=null&&eval(rtn.Analytics);rtn.Javascript!=null?(eval(rtn.Javascript+callBackJavascript),$.isFunction(window.updatePromotions)&&updatePromotions()):rtn.HtmlMessage!=null&&alert(rtn.HtmlMessage);rtn.Promotion!=null&&eval(rtn.Promotion);$(".btnUpdateCart").length>0&&__doPostBack("","")}catch(err){}};ProductStore.editKitConfig=function(n,t,i,r,u){r&&r!=""&&r!=0||(r=null);u&&u!=""||(u="Unknown");var f=[];f.push("/ProductStore/KitConfiguration/KitConfiguration","?sku=",n,"&lineTypeIden=",t,"&configurationIndex=",i,"&promotionID=",r,"&revenueSource=",u);Popup.displayPopup(f.join(""),null,!0)};ProductStore.removeKitConfig=function(n,t,i,r){Melaleuca.Web.AjaxManager.RemoveKitConfigFromCart(n,t,i,r)};ProductStore.copyKitConfig=function(n,t,i,r){Melaleuca.Web.AjaxManager.DuplicateKitConfigFromCart(n,t,i,r)};ProductStore.rtnRemoveKitConfig=function(rtn){rtn.Javascript!=null&&eval(rtn.Javascript);ProductStore.addToCartRefresh()};ProductStore.rtnCopyKitConfig=function(rtn){rtn.Javascript!=null&&eval(rtn.Javascript);rtn.HasErrorInRequestedAction||ProductStore.addToCartRefresh()};ProductStore.addToCartRefresh=function(){try{addToCartRefreshId!=null&&(window.location=window.location.href)}catch(n){}};ProductStore.DisplayLSDContentModal=function(){Popup.displayGeneralContentPopup("LSD_insert")};ProductStore.DisplayToolTipContentModal=function(){var n=$("#promotionToolTip").html();Popup.displayGeneralMessagePopup(n,null,null,null,null)};__nonMSDOMBrowser=window.navigator.appName.toLowerCase().indexOf("explorer")==-1;swfobject=function(){function v(){var i,r,n;if(!c){try{i=t.getElementsByTagName("body")[0].appendChild(h("span"));i.parentNode.removeChild(i)}catch(u){return}for(c=!0,r=w.length,n=0;n<r;n++)w[n]()}}function yt(n){c?n():w[w.length]=n}function pt(n){if(typeof r.addEventListener!=i)r.addEventListener("load",n,!1);else if(typeof t.addEventListener!=i)t.addEventListener("load",n,!1);else if(typeof r.attachEvent!=i)ui(r,"onload",n);else if(typeof r.onload=="function"){var u=r.onload;r.onload=function(){u();n()}}else r.onload=n}function gt(){lt?ni():it()}function ni(){var o=t.getElementsByTagName("body")[0],u=h(f),r,e;u.setAttribute("type",p);r=o.appendChild(u);r?(e=0,function(){if(typeof r.GetVariable!=i){var t=r.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),n.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(e<10){e++;setTimeout(arguments.callee,10);return}o.removeChild(u);r=null;it()}()):it()}function it(){var y=s.length,r,t,h,c,v;if(y>0)for(r=0;r<y;r++){var f=s[r].id,e=s[r].callbackFn,o={success:!1,id:f};if(n.pv[0]>0){if(t=u(f),t)if(!g(s[r].swfVersion)||n.wk&&n.wk<312)if(s[r].expressInstall&&ut()){h={};h.data=s[r].expressInstall;h.width=t.getAttribute("width")||"0";h.height=t.getAttribute("height")||"0";t.getAttribute("class")&&(h.styleclass=t.getAttribute("class"));t.getAttribute("align")&&(h.align=t.getAttribute("align"));var p={},a=t.getElementsByTagName("param"),w=a.length;for(c=0;c<w;c++)a[c].getAttribute("name").toLowerCase()!="movie"&&(p[a[c].getAttribute("name")]=a[c].getAttribute("value"));ft(h,p,f,e)}else ti(t),e&&e(o);else l(f,!0),e&&(o.success=!0,o.ref=rt(f),e(o))}else l(f,!0),e&&(v=rt(f),v&&typeof v.SetVariable!=i&&(o.success=!0,o.ref=v),e(o))}}function rt(n){var r=null,t=u(n),e;return t&&t.nodeName=="OBJECT"&&(typeof t.SetVariable!=i?r=t:(e=t.getElementsByTagName(f)[0],e&&(r=e))),r}function ut(){return!d&&g("6.0.65")&&(n.win||n.mac)&&!(n.wk&&n.wk<312)}function ft(f,e,o,s){var c,v,l,a;d=!0;nt=s||null;at={success:!1,id:o};c=u(o);c&&(c.nodeName=="OBJECT"?(y=et(c),k=null):(y=c,k=o),f.id=ht,(typeof f.width==i||!/%$/.test(f.width)&&parseInt(f.width,10)<310)&&(f.width="310"),(typeof f.height==i||!/%$/.test(f.height)&&parseInt(f.height,10)<137)&&(f.height="137"),t.title=t.title.slice(0,47)+" - Flash Player Installation",v=n.ie&&n.win?"ActiveX":"PlugIn",l="MMredirectURL="+r.location.toString().replace(/&/g,"%26")+"&MMplayerType="+v+"&MMdoctitle="+t.title,typeof e.flashvars!=i?e.flashvars+="&"+l:e.flashvars=l,n.ie&&n.win&&c.readyState!=4&&(a=h("div"),o+="SWFObjectNew",a.setAttribute("id",o),c.parentNode.insertBefore(a,c),c.style.display="none",function(){c.readyState==4?c.parentNode.removeChild(c):setTimeout(arguments.callee,10)}()),ot(f,e,o))}function ti(t){if(n.ie&&n.win&&t.readyState!=4){var i=h("div");t.parentNode.insertBefore(i,t);i.parentNode.replaceChild(et(t),i);t.style.display="none",function(){t.readyState==4?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(et(t),t)}function et(t){var u=h("div"),e,i,o,r;if(n.win&&n.ie)u.innerHTML=t.innerHTML;else if(e=t.getElementsByTagName(f)[0],e&&(i=e.childNodes,i))for(o=i.length,r=0;r<o;r++)i[r].nodeType==1&&i[r].nodeName=="PARAM"||i[r].nodeType==8||u.appendChild(i[r].cloneNode(!0));return u}function ot(t,r,e){var v,y=u(e),w,o,k,a,c,s,l;if(n.wk&&n.wk<312)return v;if(y)if(typeof t.id==i&&(t.id=e),n.ie&&n.win){w="";for(o in t)t[o]!=Object.prototype[o]&&(o.toLowerCase()=="data"?r.movie=t[o]:o.toLowerCase()=="styleclass"?w+=' class="'+t[o]+'"':o.toLowerCase()!="classid"&&(w+=" "+o+'="'+t[o]+'"'));k="";for(a in r)r[a]!=Object.prototype[a]&&(k+='<param name="'+a+'" value="'+r[a]+'" />');y.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+w+">"+k+"<\/object>";b[b.length]=t.id;v=u(t.id)}else{c=h(f);c.setAttribute("type",p);for(s in t)t[s]!=Object.prototype[s]&&(s.toLowerCase()=="styleclass"?c.setAttribute("class",t[s]):s.toLowerCase()!="classid"&&c.setAttribute(s,t[s]));for(l in r)r[l]!=Object.prototype[l]&&l.toLowerCase()!="movie"&&ii(c,l,r[l]);y.parentNode.replaceChild(c,y);v=c}return v}function ii(n,t,i){var r=h("param");r.setAttribute("name",t);r.setAttribute("value",i);n.appendChild(r)}function wt(t){var i=u(t);i&&i.nodeName=="OBJECT"&&(n.ie&&n.win?(i.style.display="none",function(){i.readyState==4?ri(t):setTimeout(arguments.callee,10)}()):i.parentNode.removeChild(i))}function ri(n){var t=u(n),i;if(t){for(i in t)typeof t[i]=="function"&&(t[i]=null);t.parentNode.removeChild(t)}}function u(n){var i=null;try{i=t.getElementById(n)}catch(r){}return i}function h(n){return t.createElement(n)}function ui(n,t,i){n.attachEvent(t,i);a[a.length]=[n,t,i]}function g(t){var r=n.pv,i=t.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,r[0]>i[0]||r[0]==i[0]&&r[1]>i[1]||r[0]==i[0]&&r[1]==i[1]&&r[2]>=i[2]?!0:!1}function bt(r,u,o,s){var a,c,l;n.ie&&n.mac||(a=t.getElementsByTagName("head")[0],a)&&(c=o&&typeof o=="string"?o:"screen",s&&(e=null,tt=null),e&&tt==c||(l=h("style"),l.setAttribute("type","text/css"),l.setAttribute("media",c),e=a.appendChild(l),n.ie&&n.win&&typeof t.styleSheets!=i&&t.styleSheets.length>0&&(e=t.styleSheets[t.styleSheets.length-1]),tt=c),n.ie&&n.win?e&&typeof e.addRule==f&&e.addRule(r,u):e&&typeof t.createTextNode!=i&&e.appendChild(t.createTextNode(r+" {"+u+"}")))}function l(n,t){if(vt){var i=t?"visible":"hidden";c&&u(n)?u(n).style.visibility=i:bt("#"+n,"visibility:"+i)}}function kt(n){var t=/[\\\"<>\.;]/.exec(n)!=null;return t&&typeof encodeURIComponent!=i?encodeURIComponent(n):n}var i="undefined",f="object",st="Shockwave Flash",dt="ShockwaveFlash.ShockwaveFlash",p="application/x-shockwave-flash",ht="SWFObjectExprInst",ct="onreadystatechange",r=window,t=document,o=navigator,lt=!1,w=[gt],s=[],b=[],a=[],y,k,nt,at,c=!1,d=!1,e,tt,vt=!0,n=function(){var l=typeof t.getElementById!=i&&typeof t.getElementsByTagName!=i&&typeof t.createElement!=i,e=o.userAgent.toLowerCase(),s=o.platform.toLowerCase(),a=s?/win/.test(s):/win/.test(e),v=s?/mac/.test(s):/mac/.test(e),y=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,h=!+"\v1",u=[0,0,0],n=null,c;if(typeof o.plugins!=i&&typeof o.plugins[st]==f)n=o.plugins[st].description,!n||typeof o.mimeTypes!=i&&o.mimeTypes[p]&&!o.mimeTypes[p].enabledPlugin||(lt=!0,h=!1,n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),u[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),u[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),u[2]=/[a-zA-Z]/.test(n)?parseInt(n.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof r.ActiveXObject!=i)try{c=new ActiveXObject(dt);c&&(n=c.GetVariable("$version"),n&&(h=!0,n=n.split(" ")[1].split(","),u=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]))}catch(w){}return{w3:l,pv:u,wk:y,ie:h,win:a,mac:v}}(),fi=function(){n.w3&&((typeof t.readyState!=i&&t.readyState=="complete"||typeof t.readyState==i&&(t.getElementsByTagName("body")[0]||t.body))&&v(),c||(typeof t.addEventListener!=i&&t.addEventListener("DOMContentLoaded",v,!1),n.ie&&n.win&&(t.attachEvent(ct,function(){t.readyState=="complete"&&(t.detachEvent(ct,arguments.callee),v())}),r==top&&function(){if(!c){try{t.documentElement.doScroll("left")}catch(n){setTimeout(arguments.callee,0);return}v()}}()),n.wk&&function(){if(!c){if(!/loaded|complete/.test(t.readyState)){setTimeout(arguments.callee,0);return}v()}}(),pt(v)))}(),ei=function(){n.ie&&n.win&&window.attachEvent("onunload",function(){for(var e=a.length,r,i,u,f,t=0;t<e;t++)a[t][0].detachEvent(a[t][1],a[t][2]);for(r=b.length,i=0;i<r;i++)wt(b[i]);for(u in n)n[u]=null;n=null;for(f in swfobject)swfobject[f]=null;swfobject=null})}();return{registerObject:function(t,i,r,u){if(n.w3&&t&&i){var f={};f.id=t;f.swfVersion=i;f.expressInstall=r;f.callbackFn=u;s[s.length]=f;l(t,!1)}else u&&u({success:!1,id:t})},getObjectById:function(t){if(n.w3)return rt(t)},embedSWF:function(t,r,u,e,o,s,h,c,a,v){var y={success:!1,id:r};n.w3&&!(n.wk&&n.wk<312)&&t&&r&&u&&e&&o?(l(r,!1),yt(function(){var n,b,p,k,w,d;if(u+="",e+="",n={},a&&typeof a===f)for(b in a)n[b]=a[b];if(n.data=t,n.width=u,n.height=e,p={},c&&typeof c===f)for(k in c)p[k]=c[k];if(h&&typeof h===f)for(w in h)typeof p.flashvars!=i?p.flashvars+="&"+w+"="+h[w]:p.flashvars=w+"="+h[w];if(g(o))d=ot(n,p,r),n.id==r&&l(r,!0),y.success=!0,y.ref=d;else{if(s&&ut()){n.data=s;ft(n,p,r,v);return}l(r,!0)}v&&v(y)})):v&&v(y)},switchOffAutoHideShow:function(){vt=!1},ua:n,getFlashPlayerVersion:function(){return{major:n.pv[0],minor:n.pv[1],release:n.pv[2]}},hasFlashPlayerVersion:g,createSWF:function(t,i,r){return n.w3?ot(t,i,r):undefined},showExpressInstall:function(t,i,r,u){n.w3&&ut()&&ft(t,i,r,u)},removeSWF:function(t){n.w3&&wt(t)},createCSS:function(t,i,r,u){n.w3&&bt(t,i,r,u)},addDomLoadEvent:yt,addLoadEvent:pt,getQueryParamValue:function(n){var r=t.location.search||t.location.hash,u,i;if(r){if(/\?/.test(r)&&(r=r.split("?")[1]),n==null)return kt(r);for(u=r.split("&"),i=0;i<u.length;i++)if(u[i].substring(0,u[i].indexOf("="))==n)return kt(u[i].substring(u[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(d){var t=u(ht);t&&y&&(t.parentNode.replaceChild(y,t),k&&(l(k,!0),n.ie&&n.win&&(y.style.display="block")),nt&&nt(at));d=!1}}}}();Cart={};Cart.UpdateAllCartItems=function(){Cart.UpdateCart()};Cart.UpdateCart=function(){$.ajax({method:"GET",url:"/ProductStore/Cart/UpdateCart",cache:!1,success:function(n){n!=undefined&&Cart.MultipartialUpdate(n)},error:function(n){n.Message?Popup.displayGeneralMessagePopup(n.Message,"errorMessageLarge"):Popup.displayGeneralMessagePopup(localizations.updateCartError,"errorMessageLarge")}})};Cart.DisplayCertificateContentModal=function(){Popup.displayGeneralContentPopup("Certificate_Insert")};Cart.HideAlert=function(n){$("#"+n).slideUp("slow")};Cart.ProductQuantityChange=function(n,t,i,r){var u=convertDoubleToSingleByte(n.value);$.isNumeric(u)&&$.ajax({method:"GET",url:"/ProductStore/Cart/ProductQuantityChange",cache:!1,data:{quantity:u,sku:t,inoId:i,lineType:r},success:function(t){t!=undefined&&(t.Success==undefined||t.Success||(t.Message==="LimitedPurchaseOrder"?ProductStore.showLimitedPurchaseOrderPopup():Popup.displayGeneralMessagePopup(t.Message),n.value=t.OriginalQuantity),Cart.MultipartialUpdate(t),OnCartStateChange())},error:function(t){t.Message?Popup.displayGeneralMessagePopup(t.Message,t.MessageCssClass):Popup.displayGeneralMessagePopup(localizations.Cart_ChangeQtyError);t.OriginalQuantity&&(n.value=t.OriginalQuantity)}})};Cart.RemoveDetailItem=function(n,t,i){if(t&&t>0){var r=confirm(localizations.ino_ConfirmRemove);if(!r)return}$.ajax({method:"GET",url:"/ProductStore/Cart/Remove",cache:!1,data:{sku:n,inoId:t,lineType:i},success:function(n){n!=undefined&&(n.Success==undefined||n.Success||Popup.displayGeneralMessagePopup(n.Message,n.MessageCssClass),Cart.MultipartialUpdate(n),OnCartStateChange())},error:function(n){Popup.displayGeneralMessagePopup(n.Message,n.MessageCssClass)}})};Cart.AddAccessoryItemToCart=function(n,t){createOnClickAnalytics("Product Accessory Button","Checkout Process",null);var i=$("#trItem"+n);isMobile!=="undefined"&&isMobile&&(i=$("#product_"+n));i.find(".addToCartWrapper [sku="+t+"] button").click()};Cart.ToggleLsdCheckbox=function(n,t){var r="chkLsd_"+n+"_"+t,i=$("#"+r),u;createOnClickAnalytics("LSD Checkbox","Checkout Process",null);i.is(":disabled")||(u=i.is(":checked"),i.prop("checked",!u),Cart.SetLoyaltyDollar(n,r))};Cart.SetLoyaltyDollar=function(n,t){var r=$("#".concat(t)),i=!1;r.is(":checked")&&(i=!0);$.ajax({method:"GET",url:"/ProductStore/Cart/SetLoyaltyShoppingDollar",data:{sku:n,isChecked:i},cache:!1,success:function(n){n!=undefined&&Cart.MultipartialUpdate(n)},error:function(n){Popup.displayGeneralMessagePopup(n.Message)}})};Cart.ToggleCertificateCheckbox=function(n,t){var r="chkConvenience_"+n+"_"+t,i=$("#"+r),u;createOnClickAnalytics("Certificate Checkbox","Checkout Process",null);i.is(":disabled")||(u=i.is(":checked"),i.prop("checked",!u),Cart.SetConvenienceDollar(n,r))};Cart.SetConvenienceDollar=function(n,t){var r=$("#".concat(t)),i=!1;r.is(":checked")&&(i=!0);$.ajax({method:"GET",cache:!1,url:"/ProductStore/Cart/SetConvenienceDollar",data:{sku:n,isChecked:i},success:function(n){n!=undefined&&Cart.MultipartialUpdate(n)},error:function(n){Popup.displayGeneralMessagePopup(n.Message)}})};Cart.GoToProductPage=function(n){window.location="/ProductStore/Product?sku="+n};Cart.ContinueCheckout=function(){$.ajax({method:"GET",url:"/ProductStore/Cart/ContinueCheckout",cache:!1,success:function(n){n.ShowPromotionDisqualifyAlert&&Cart.CheckPromotionQualifications();n.AlertMessage!=null&&Popup.displayGeneralMessagePopup(n.AlertMessage,null,!1,"titleLarge");n.ShowAlertPopup&&n.PopupRoute&&Popup.displayPopup(n.PopupRoute);n.Success&&n.PromoPopupRoute!=null&&(n.HasCheckoutPromotionBogo?window.location.href=n.CheckoutPromotionBogoUrl:Popup.displayPopup(n.PromoPopupRoute,0));n.Success&&n.RedirectUrl!=null&&(window.location.href=n.RedirectUrl)},error:function(n){Popup.displayGeneralMessagePopup(n.Message)}})};Cart.CheckPromotionQualifications=function(n){continueLocaltion="ContinueShopping";n!=null&&(continueLocaltion=n);Popup.displayPopup("/ProductStore/Cart/PromotionQualificationWarning/?continueButtonLocation="+continueLocaltion,!0)};Cart.RemovePromotionIDs=function(n){$.ajax({method:"GET",url:"/ProductStore/Cart/RemovePromotions",cache:!1,data:{promotionIds:n},success:function(n){window.location.href=n.RedirectUrl}})};Cart.ContinueShopping=function(){Popup.closePopup()};Cart.ProcessCouponPromotion=function(n){var t=$("#txtCouponCode").val();$.ajax({method:"GET",url:"/Promotion/ProcessCouponPromotion",cache:!1,data:{couponCode:t,displayLocationUrl:window.location.href},isMobile:n,success:function(data){if(data.JavaScript!=null&&(addToCartRefreshId="CartRefresh",eval(data.JavaScript)),data.HtmlMessage!=null){var errorLabel=$("#couponErrorLabel");errorLabel!=null&&t!="VPK36A"&&t!="HCP59A"?(errorLabel.text(data.HtmlMessage),errorLabel.css("display","initial")):t=="VPK36A"?Popup.displayGeneralContentPopup("VitaminCertificateVitality4_InvalidCode"):t=="HCP59A"?Popup.displayGeneralContentPopup("VitaminCertificateVitality6_InvalidCode"):Popup.displayGeneralMessagePopup(data.HtmlMessage,data.CssClass);data.RedirectURL!=null&&Cart.UpdateCart()}data.Analytics!=null&&eval(data.Analytics)},error:function(n){if(this.isMobile){var t=$("#couponErrorLabel");t.text(n.HtmlMessage);t.css("display","initial")}else Popup.displayGeneralMessagePopup("There was problem applying Coupons","errorMessageLarge")}})};Cart.MultipartialUpdate=function(n){for(v in n)if(n[v].content)switch(n[v].attributeName){case"CartCount":updateHeaderCartCount(n[v].html);break;case"ItemAlert":var t=$("itemAlertMessage_"+n[v].attributeValue);t.html(n[v].html);break;case"cartPoints":$("#cartMainPoints").html(n[v].html);break;case"cartTotals":$("#cartTotalPrice").html(n[v].html);break;case"orderCommitmentTotals":$("#orderCommitmentTotals").html(n[v].html)}else if(n[v].message)Popup.displayGeneralMessagePopup(n[v].message,0,!1,null,n[v].cssClass);else if(typeof n[v]!="undefined")switch(n[v].attributeName){case"cartItems":$("#dvCartItemsContainer").html(n[v].html);break;case"cartSubTotals":$("#cartSubTotalsPartial").html(n[v].html);break;case"orderMiscDetails":$("#orderMiscDetailPartial").html(n[v].html);break;case"cartItemsAlerts":$("#cartItemsAlerts").html(n[v].html);break;case"skyScraper":$("#skyScraperWrapper").innerHTML=n[v].html;break;case"cartTopAlerts":$("#cartTopAlerts").html(n[v].html);break;case"CartCount":updateHeaderCartCount(n[v].html)}};Cart.EditKitConfig=function(n,t,i,r){window.location.href="/ProductStore/KitConfiguration/KitConfiguration?sku=".concat(n,"&configurationIndex=",r,"&lineTypeIden=",t,"&promotionID=",i)};Cart.RemoveKitConfig=function(n,t,i,r){Melaleuca.Web.AjaxManager.RemoveKitConfigFromCart(n,t,i,r);OnCartStateChange()};Cart.CopyKitConfig=function(n,t,i,r){Melaleuca.Web.AjaxManager.DuplicateKitConfigFromCart(n,t,i,r);OnCartStateChange()};Cart.RemoveUnQualifiedPromotions=function(){$.ajax({method:"POST",url:"/ProductStore/Cart/RemoveUnQualifiedPromotions",cache:!1})};Cart.GetCartContent=function(){var n=$.Deferred();return $.ajax({method:"GET",url:"/UtilityWebHelperApis/MiniCart/GetCart/",params:{timeStamp:(new Date).getTime()},cache:!1}).success(function(t){n.resolve(t)}).error(function(t){n.reject(t)}),n.promise};skuDetail=function(){var n=function(n,t){var i=$.Deferred();return $.ajax({method:"GET",url:"/ExternalServices/Api/Products/?skus="+n+"&culture="+t,dataType:"json",contentType:"application/json",cache:!1}).done(function(n){i.resolve(n)}).fail(function(){i.reject()}),i};return{getMultipleSkuDetail:n}}();productInventory=function(n,t){var i=t.melaleucaApiDomain+"/ProductInventory/1.0/InventorySearch",r=function(t){var r=$.Deferred();return $.ajax({method:"GET",url:i,data:{Skus:t,CultureId:n.UICulture,ShippingWarehouseId:n.ShippingWarehouseId,OrderDate:n.ContentDate},traditional:!0,cache:!0}).done(function(n){r.resolve(n)}).fail(function(n){r.reject(n)}),r};return{getInventorySearchResults:r}}(PageClientData,pageUrls);$(function(){$(".nav-sub-item").on("mouseenter",function(){clearTimeout(subMenuChangeTimer);CancelPopupClose();var n=$(this).attr("data-self-id");ShowMenuPopup(n)}).on("mouseleave",function(){menuOpenTimer&&clearTimeout(menuOpenTimer);HideMenuPopups()});$(".nav-item-popup").on("mouseenter",function(){clearTimeout(subMenuChangeTimer);CancelPopupClose()}).on("mouseleave",function(){HideMenuPopups()});$(".site-nav").on("mouseleave",function(){var n=$(".is-current").attr("data-sub-menu-id");ShowSubMenu(n)});var n=$(".nav-root-item").keydown(function(t){var i=$("a.nav-sub-item.is-visible"),r=$(".nav-root-item");t.which==39&&($("#menuItem_"+(n.index(this)+1)).focus(),t.preventDefault());t.which==37&&($("#menuItem_"+(n.index(this)-1)).focus(),t.preventDefault());(t.which==40||t.which==32)&&(event.preventDefault(),$(i).first().focus())}),t=$(".nav-sub-item").keydown(function(n){n.which==39&&n.srcElement.nextElementSibling.focus();n.which==37&&n.srcElement.previousElementSibling.focus();n.which==32&&(event.preventDefault(),n.currentTarget.click())})});AlertsObject=function(){function n(){var n=$.Deferred();return $.ajax({method:"GET",url:"/Notifications/GetUnviewedAlertCount",cache:!1}).done(function(t){n.resolve(t)}).fail(function(t){n.reject(t)}),n.promise()}function t(){var n=$.Deferred();return $.ajax({method:"GET",url:"/Notifications/GetWebAlerts",cache:!1}).done(function(t){n.resolve(t)}).fail(function(t){n.reject(t)}),n.promise()}function i(n){var t=$.Deferred();return $.ajax({method:"POST",url:"/Notifications/DismissWebAlerts",data:{messageIds:n},cache:!1}).done(function(n){t.resolve(n)}).fail(function(n){t.reject(n)}),t.promise()}function r(n){var t=$.Deferred();return $.ajax({method:"POST",url:"/Notifications/SetToViewed",data:{messageIds:n},cache:!1}).done(function(n){t.resolve(n)}).fail(function(n){t.reject(n)}),t.promise()}function u(){var n=$.Deferred();return $.ajax({method:"POST",url:"/PageLayout/SetHasViewedNotificationTray",cache:!1}).done(function(t){n.resolve(t)}).fail(function(t){n.reject(t)}),n.promise()}return{unviewedAlertCount:n,webAlerts:t,dismissAlerts:i,viewAlerts:r,hasViewedTray:u}}()